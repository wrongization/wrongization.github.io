<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>BUAA-CO-mipsçŸ¥è¯†ç‚¹ | wrongization</title><meta name="author" content="wrongization"><meta name="copyright" content="wrongization"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="COåˆè¯†mipsçŸ¥è¯†ç‚¹ å¯„å­˜å™¨åœ°å€ï¼š  ä¼ªæŒ‡ä»¤  **.dataï¼š**ç”¨äºé¢„å…ˆå­˜å‚¨æ•°æ®çš„ä¼ªæŒ‡ä»¤çš„å¼€å§‹æ ‡å¿—ã€‚ **.textï¼š**ç¨‹åºä»£ç æŒ‡ä»¤å¼€å§‹çš„æ ‡å¿—ã€‚ **.wordï¼š**ä»¥å­—ä¸ºå•ä½å­˜å‚¨æ•°æ®ã€‚ **.asciizï¼š**ä»¥å­—èŠ‚ä¸ºå•ä½å­˜å‚¨å­—ç¬¦ä¸²ã€‚ **.spaceï¼š**ç”³è¯·è‹¥å¹²ä¸ªå­—èŠ‚çš„æœªåˆå§‹åŒ–çš„å†…å­˜ç©ºé—´ã€‚  V0   çš„ä¸åŒå€¼ å¸¸ç”¨ï¼š    Service Code in $v0 Arguments">
<meta property="og:type" content="article">
<meta property="og:title" content="BUAA-CO-mipsçŸ¥è¯†ç‚¹">
<meta property="og:url" content="https://wrongization.site/2024/09/22/mipscommand.html">
<meta property="og:site_name" content="wrongization">
<meta property="og:description" content="COåˆè¯†mipsçŸ¥è¯†ç‚¹ å¯„å­˜å™¨åœ°å€ï¼š  ä¼ªæŒ‡ä»¤  **.dataï¼š**ç”¨äºé¢„å…ˆå­˜å‚¨æ•°æ®çš„ä¼ªæŒ‡ä»¤çš„å¼€å§‹æ ‡å¿—ã€‚ **.textï¼š**ç¨‹åºä»£ç æŒ‡ä»¤å¼€å§‹çš„æ ‡å¿—ã€‚ **.wordï¼š**ä»¥å­—ä¸ºå•ä½å­˜å‚¨æ•°æ®ã€‚ **.asciizï¼š**ä»¥å­—èŠ‚ä¸ºå•ä½å­˜å‚¨å­—ç¬¦ä¸²ã€‚ **.spaceï¼š**ç”³è¯·è‹¥å¹²ä¸ªå­—èŠ‚çš„æœªåˆå§‹åŒ–çš„å†…å­˜ç©ºé—´ã€‚  V0   çš„ä¸åŒå€¼ å¸¸ç”¨ï¼š    Service Code in $v0 Arguments">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://wrongization.site/img/cover/mips/mips.webp">
<meta property="article:published_time" content="2024-09-22T03:14:19.000Z">
<meta property="article:modified_time" content="2025-08-12T04:55:20.750Z">
<meta property="article:author" content="wrongization">
<meta property="article:tag" content="co">
<meta property="article:tag" content="mips">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://wrongization.site/img/cover/mips/mips.webp"><link rel="shortcut icon" href="/img/logo.webp"><link rel="canonical" href="https://wrongization.site/2024/09/22/mipscommand.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="/%E5%8D%8E%E6%96%87%E4%B8%AD%E5%AE%8B%7CTitillium%20Web%7CPingFang%20SC%7CHiragino%20Sans%20GB%7CMicrosoft%20JhengHei%7CMicrosoft%20YaHeisans-serif" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}","hits_stats":"å…±æ‰¾åˆ° ${hits} ç¯‡æ–‡ç« "}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":0},
  copy: {
    success: 'æˆåŠŸå¤åˆ¶~',
    error: 'å¤åˆ¶å†…å®¹åˆ°äº†æ˜Ÿä¹‹å½¼æ–¹',
    noSupport: 'ä¸æ”¯æŒçš„æµè§ˆå™¨ï¼'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'æœˆå‰'
  },
  copyright: {"copy":true,"copyrightEbable":true,"limitCount":100,"languages":{"author":"ä½œè€…: wrongization","link":"åŸæ–‡è¿æ¥: ","source":"æ¥æº: wrongization","info":"å¤åˆ¶å’Œè½¬è½½è¯·æ ‡æ˜å‡ºå¤„ã€‚"}},
  lightbox: 'null',
  Snackbar: {"chs_to_cht":"ä½ åˆ‡æ¢åˆ°äº†ç®€ä½“ä¸­æ–‡","cht_to_chs":"ä½ åˆ‡æ¢åˆ°äº†ç¹ä½“ä¸­æ–‡","day_to_night":"æ°¸è¿œæ˜¯æ·±å¤œæœ‰å¤šå¥½ã€‚","night_to_day":"åœ°çƒå°±æ˜¯å®Œç¾çš„è§‚æµ‹ç‰¹ç­‰å¸­ã€‚","bgLight":"#7D26CD","bgDark":"#551A8B","position":"bottom-right"},
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: 'ğŸ’¡åŠ è½½æ›´å¤š'
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'BUAA-CO-mipsçŸ¥è¯†ç‚¹',
  isPost: true,
  isHome: false,
  isHighlightShrink: true,
  isToc: true,
  postUpdate: '2025-08-12 12:55:20'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="/css/transpancy.css"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/HCLonely/images@master/others/heartbeat.min.css"><meta name="generator" content="Hexo 7.3.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">ğŸµè½½å…¥ä¸­...</div><!-- æ–°çš„ç²¾ç¾åŠ è½½æ¡--><div class="progress-bar"><div class="progress-track"><div class="progress-fill"></div><div class="progress-glow"></div></div><div class="progress-text">æ­£åœ¨å‘å¤œæ™šå¥”å»...</div></div></div></div><script>(() => {
  const $loadingBox = document.getElementById('loading-box')
  const $body = document.body
  const $progressBar = $loadingBox.querySelector('.progress-bar')
  const $progressFill = $loadingBox.querySelector('.progress-fill')
  const $progressText = $loadingBox.querySelector('.progress-text')
  let determinateActivated = false

  function setProgress(p) {
    const pct = Math.min(100, Math.max(0, p))
    if (!determinateActivated) {
      determinateActivated = true
      $progressBar.classList.add('determinate')
      $progressFill.style.animation = '' // stop indeterminate slide
    }
    $progressBar.style.setProperty('--progress-pct', pct + '%')
    $progressFill.style.width = pct + '%'
    if ($progressText) $progressText.setAttribute('data-percent', pct.toFixed(0) + '%')
  }

  function calcAssets() {
    // æ”¶é›†éœ€è¦è·Ÿè¸ªçš„èµ„æºï¼šé€ä¸ªå›¾ç‰‡ + å­—ä½“(æ•´ä½“ä¸€æ¬¡) + window load ä½œä¸ºæœ€ç»ˆä¿é™©
    const imgs = Array.from(document.images || [])
    const trackers = []
    // å›¾ç‰‡å•ç‹¬è®¡æ•°
    imgs.forEach(img => {
      trackers.push(new Promise(res => {
        if (img.complete && img.naturalWidth) return res()
        img.addEventListener('load', res, { once: true })
        img.addEventListener('error', res, { once: true })
      }))
    })
    // å­—ä½“
    if (document.fonts && document.fonts.ready) {
      trackers.push(document.fonts.ready.catch(() => {}))
    }
    // window load äº‹ä»¶ï¼ˆç¡®ä¿æ‰€æœ‰èµ„æºå®Œæˆï¼ŒåŒ…æ‹¬å¯èƒ½çš„è„šæœ¬/æ ·å¼æ‡’åŠ è½½ï¼‰
    trackers.push(new Promise(res => {
      if (document.readyState === 'complete') return res()
      window.addEventListener('load', () => res(), { once: true })
    }))

    let finished = 0
    const total = trackers.length || 1
    const per = () => {
      finished++
      const pct = finished / total * 100
      setProgress(pct)
      if (finished >= total) {
        setTimeout(() => preloader.endLoading(), 380)
      }
    }
    trackers.forEach(p => p.then(per))

    // åŠ¨æ€æå‰ï¼šå¦‚æœå›¾ç‰‡è¾ƒå¤šï¼ŒåŠ è½½ä¸­é€”å¹³æ»‘å¢é•¿ï¼ˆå¯é€‰ï¼‰
    if (imgs.length > 8) {
      let lastShown = 0
      const interval = setInterval(() => {
        if (finished >= total) return clearInterval(interval)
        // é€šè¿‡ PerformanceObserver ä¼°ç®—ï¼ˆç®€åŒ–ï¼šçº¿æ€§ç¼“åŠ¨ï¼‰
        const est = Math.min(90, lastShown + Math.random() * 4 + 1)
        if (est > lastShown) {
          setProgress(est)
          lastShown = est
        }
      }, 450)
      setTimeout(() => clearInterval(interval), 6000)
    }

    // è¶…æ—¶å…œåº•ï¼šä¿è¯ä¸ä¼šå¡æ­»
    setTimeout(() => { if (!$loadingBox.classList.contains('loaded')) setProgress(100) }, 9000)
    setTimeout(() => { if (!$loadingBox.classList.contains('loaded')) preloader.endLoading() }, 9600)
  }

  const preloader = {
    endLoading: () => {
      $body.style.overflow = ''
      $loadingBox.classList.add('loaded')
    },
    initLoading: () => {
      $body.style.overflow = 'hidden'
      $loadingBox.classList.remove('loaded')
    }
  }

  function start() {
    preloader.initLoading()
    determinateActivated = false
    setProgress(0)
    requestAnimationFrame(calcAssets)
  }

  start()

  // å¯é€‰ PJAX æ”¯æŒï¼šè‹¥ç«™ç‚¹å¯ç”¨ pjaxï¼Œé‡æ–°è§¦å‘åŠ è½½æ¡
  // é€‚é…å¸¸è§ pjax / instant.page / swup äº‹ä»¶ï¼Œå¯æŒ‰éœ€ç²¾ç®€
  const pjaxEvents = ['pjax:send','pjax:complete','swup:animationInStart','swup:contentReplaced']
  pjaxEvents.forEach(ev => {
    document.addEventListener(ev, e => {
      if (ev.includes('send') || ev.includes('animationIn')) {
        start()
      } else if (ev.includes('complete') || ev.includes('contentReplaced')) {
        // é‡æ–°ç»Ÿè®¡æ–°é¡µé¢èµ„æº
        requestAnimationFrame(calcAssets)
      }
    })
  })
})()</script><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/logo.webp" onerror="onerror=null;src='/img/gif404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">22</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">29</div></a><a href="/categories/"><div class="headline">ç±»åˆ«</div><div class="length-num">26</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> ä¸»é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> æ¡£æ¡ˆ</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> ç±»åˆ«</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-images"></i><span> å›¾åº“</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/gallery/"><i class="fa-fw fas fa-paint-brush"></i><span> ç”»å»Š</span></a></li><li><a class="site-page child" href="/photo/"><i class="fa-fw fas fa-camera"></i><span> æ‘„å½±</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> æ¨è</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> éŸ³ä¹</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> é“¾æ¥</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> å…³äº</span></a></div></div></div></div><div class="post" id="body-wrap"><!-- æ·»åŠ  data-effect ä»¥æ”¯æŒé¡¶å›¾ç‰¹æ•ˆåˆ‡æ¢ (sunset | rainy | sunny | sunrise)--><!-- é»˜è®¤ rainyï¼Œå¯é€šè¿‡ä¸»é¢˜é…ç½® theme.header_effect_default è¦†ç›–--><header class="post-bg" id="page-header" style="background-image: url('/img/cover/mips/mips.webp')" data-effect="rainy"><nav id="nav"><span id="blog-info"><a href="/" title="wrongization"><img class="site-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/logo.webp"/><span class="site-name">wrongization</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> æœç´¢</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> ä¸»é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> æ¡£æ¡ˆ</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> ç±»åˆ«</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-images"></i><span> å›¾åº“</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/gallery/"><i class="fa-fw fas fa-paint-brush"></i><span> ç”»å»Š</span></a></li><li><a class="site-page child" href="/photo/"><i class="fa-fw fas fa-camera"></i><span> æ‘„å½±</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> æ¨è</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> éŸ³ä¹</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> é“¾æ¥</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> å…³äº</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">BUAA-CO-mipsçŸ¥è¯†ç‚¹</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">åˆ›å»º</span><time class="post-meta-date-created" datetime="2024-09-22T03:14:19.000Z" title="åˆ›å»º 2024-09-22 11:14:19">2024-09-22</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°</span><time class="post-meta-date-updated" datetime="2025-08-12T04:55:20.750Z" title="æ›´æ–° 2025-08-12 12:55:20">2025-08-12</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/buaa-co/">buaa-co</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/buaa-co/mips/">mips</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/buaa-co/mips/mips%E8%AF%AD%E6%B3%95%E7%9F%A5%E8%AF%86%E7%82%B9/">mipsè¯­æ³•çŸ¥è¯†ç‚¹</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">å­—æ•°ç»Ÿè®¡:</span><span class="word-count">6.8k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»æ—¶é—´:</span><span>25åˆ†é’Ÿ</span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1>COåˆè¯†mipsçŸ¥è¯†ç‚¹</h1>
<h2 id="å¯„å­˜å™¨åœ°å€ï¼š">å¯„å­˜å™¨åœ°å€ï¼š</h2>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/09/22/mipscommand/image-20240903164135575.webp" class="" title="image-20240903164135575">
<h2 id="ä¼ªæŒ‡ä»¤">ä¼ªæŒ‡ä»¤</h2>
<ul>
<li>**.dataï¼š**ç”¨äºé¢„å…ˆå­˜å‚¨æ•°æ®çš„ä¼ªæŒ‡ä»¤çš„å¼€å§‹æ ‡å¿—ã€‚</li>
<li>**.textï¼š**ç¨‹åºä»£ç æŒ‡ä»¤å¼€å§‹çš„æ ‡å¿—ã€‚</li>
<li>**.wordï¼š**ä»¥å­—ä¸ºå•ä½å­˜å‚¨æ•°æ®ã€‚</li>
<li>**.asciizï¼š**ä»¥å­—èŠ‚ä¸ºå•ä½å­˜å‚¨å­—ç¬¦ä¸²ã€‚</li>
<li>**.spaceï¼š**ç”³è¯·è‹¥å¹²ä¸ªå­—èŠ‚çš„æœªåˆå§‹åŒ–çš„å†…å­˜ç©ºé—´ã€‚</li>
</ul>
<h2 id="V0-çš„ä¸åŒå€¼">V0   çš„ä¸åŒå€¼</h2>
<p>å¸¸ç”¨ï¼š</p>
<table>
<thead>
<tr>
<th>Service</th>
<th>Code in $v0</th>
<th>Arguments</th>
<th style="text-align:center">Result</th>
</tr>
</thead>
<tbody>
<tr>
<td><em><strong>print integer</strong></em></td>
<td><em><strong>1</strong></em></td>
<td>$a0 = integer to print</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td>print float</td>
<td>2</td>
<td>$f12 = float to print</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td>print double</td>
<td>3</td>
<td>$f12 = double to print</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td><em><strong>print string</strong></em></td>
<td><em><strong>4</strong></em></td>
<td>$a0 = address of null-terminated string to print</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td>read integer</td>
<td>5</td>
<td></td>
<td style="text-align:center">$v0 contains integer read</td>
</tr>
<tr>
<td>read float</td>
<td>6</td>
<td></td>
<td style="text-align:center">$f0 contains float read</td>
</tr>
<tr>
<td>read double</td>
<td>7</td>
<td></td>
<td style="text-align:center">$f0 contains double read</td>
</tr>
<tr>
<td>read string</td>
<td>8</td>
<td>$a0 = address of input buffer $a1 = maximum number of characters           to read</td>
<td style="text-align:center"><em>See note below table</em></td>
</tr>
<tr>
<td>sbrk (allocate heap memory)</td>
<td>9</td>
<td>$a0 = number of bytes to allocate</td>
<td style="text-align:center">$v0 contains address of allocated memory</td>
</tr>
<tr>
<td><em><strong>exit (terminate execution)</strong></em></td>
<td><em><strong>10</strong></em></td>
<td></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td>print character</td>
<td>11</td>
<td>$a0 = character to print</td>
<td style="text-align:center"><em>See note below table</em></td>
</tr>
<tr>
<td>read character</td>
<td>12</td>
<td></td>
<td style="text-align:center">$v0 contains character read</td>
</tr>
<tr>
<td>open file</td>
<td>13</td>
<td>$a0 = address of null-terminated string containing filename $a1 =           flags $a2 = mode</td>
<td style="text-align:center">$v0 contains file descriptor (negative if error). <em>See note below           table</em></td>
</tr>
<tr>
<td>read from file</td>
<td>14</td>
<td>$a0 = file descriptor $a1 = address of input buffer $a2 =           maximum number of characters to read</td>
<td style="text-align:center">$v0 contains number of characters read (0 if end-of-file, negative           if error). <em>See note below table</em></td>
</tr>
<tr>
<td>write to file</td>
<td>15</td>
<td>$a0 = file descriptor $a1 = address of output buffer $a2 =           number of characters to write</td>
<td style="text-align:center">$v0 contains number of characters written (negative if error). <em>See           note below table</em></td>
</tr>
<tr>
<td>close file</td>
<td>16</td>
<td>$a0 = file descriptor</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td>exit2 (terminate with value)</td>
<td>17</td>
<td>$a0 = termination result</td>
<td style="text-align:center"><em>See note below table</em></td>
</tr>
<tr>
<td><em>Services 1 through 17 are compatible with the SPIM simulator,           other than Open File (13) as described in the Notes below the table.           Services 30 and higher are exclusive to MARS.</em></td>
<td></td>
<td></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td>time (system time)</td>
<td>30</td>
<td></td>
<td style="text-align:center">$a0 = low order 32 bits of system time $a1 = high order 32 bits           of system time. <em>See note below table</em></td>
</tr>
<tr>
<td>MIDI out</td>
<td>31</td>
<td>$a0 = pitch (0-127) $a1 = duration in milliseconds $a2 =           instrument (0-127) $a3 = volume (0-127)</td>
<td style="text-align:center">Generate tone and return immediately. <em>See note below table</em></td>
</tr>
<tr>
<td>sleep</td>
<td>32</td>
<td>$a0 = the length of time to sleep in milliseconds.</td>
<td style="text-align:center">Causes the MARS Java thread to sleep for (at least) the specified           number of milliseconds. This timing will not be precise, as the Java           implementation will add some overhead.</td>
</tr>
<tr>
<td>MIDI out synchronous</td>
<td>33</td>
<td>$a0 = pitch (0-127) $a1 = duration in milliseconds $a2 =           instrument (0-127) $a3 = volume (0-127)</td>
<td style="text-align:center">Generate tone and return upon tone completion. <em>See note below           table</em></td>
</tr>
<tr>
<td>print integer in hexadecimal</td>
<td>34</td>
<td>$a0 = integer to print</td>
<td style="text-align:center">Displayed value is 8 hexadecimal digits, left-padding with zeroes if           necessary.</td>
</tr>
<tr>
<td>print integer in binary</td>
<td>35</td>
<td>$a0 = integer to print</td>
<td style="text-align:center">Displayed value is 32 bits, left-padding with zeroes if necessary.</td>
</tr>
<tr>
<td>print integer as unsigned</td>
<td>36</td>
<td>$a0 = integer to print</td>
<td style="text-align:center">Displayed as unsigned decimal value.</td>
</tr>
<tr>
<td>(not used)</td>
<td>37-39</td>
<td></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td>set seed</td>
<td>40</td>
<td>$a0 = i.d. of pseudorandom number generator (any int). $a1 = seed           for corresponding pseudorandom number generator.</td>
<td style="text-align:center">No values are returned. Sets the seed of the corresponding           underlying Java pseudorandom number generator (<code>java.util.Random</code>).           <em>See note below table</em></td>
</tr>
<tr>
<td>random int</td>
<td>41</td>
<td>$a0 = i.d. of pseudorandom number generator (any int).</td>
<td style="text-align:center">$a0 contains the next pseudorandom, uniformly distributed int value           from this random number generatorâ€™s sequence. <em>See note below table</em></td>
</tr>
<tr>
<td>random int range</td>
<td>42</td>
<td>$a0 = i.d. of pseudorandom number generator (any int). $a1 =           upper bound of range of returned values.</td>
<td style="text-align:center">$a0 contains pseudorandom, uniformly distributed int value in the           range 0 = [int] [upper bound], drawn from this random number           generatorâ€™s sequence. <em>See note below table</em></td>
</tr>
<tr>
<td>random float</td>
<td>43</td>
<td>$a0 = i.d. of pseudorandom number generator (any int).</td>
<td style="text-align:center">$f0 contains the next pseudorandom, uniformly distributed float           value in the range 0.0 = f 1.0 from this random number generatorâ€™s           sequence. <em>See note below table</em></td>
</tr>
<tr>
<td>random double</td>
<td>44</td>
<td>$a0 = i.d. of pseudorandom number generator (any int).</td>
<td style="text-align:center">$f0 contains the next pseudorandom, uniformly distributed double           value in the range 0.0 = f 1.0 from this random number generatorâ€™s           sequence. <em>See note below table</em></td>
</tr>
<tr>
<td>(not used)</td>
<td>45-49</td>
<td></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td>ConfirmDialog</td>
<td>50</td>
<td>$a0 = address of null-terminated string that is the message to user</td>
<td style="text-align:center">$a0 contains value of user-chosen option 0: Yes 1: No 2:           Cancel</td>
</tr>
<tr>
<td>InputDialogInt</td>
<td>51</td>
<td>$a0 = address of null-terminated string that is the message to user</td>
<td style="text-align:center">$a0 contains int read $a1 contains status value 0: OK status -1:           input data cannot be correctly parsed -2: Cancel was chosen -3:           OK was chosen but no data had been input into field</td>
</tr>
<tr>
<td>InputDialogFloat</td>
<td>52</td>
<td>$a0 = address of null-terminated string that is the message to user</td>
<td style="text-align:center">$f0 contains float read $a1 contains status value 0: OK status -1:           input data cannot be correctly parsed -2: Cancel was chosen -3:           OK was chosen but no data had been input into field</td>
</tr>
<tr>
<td>InputDialogDouble</td>
<td>53</td>
<td>$a0 = address of null-terminated string that is the message to user</td>
<td style="text-align:center">$f0 contains double read $a1 contains status value 0: OK status -1:           input data cannot be correctly parsed -2: Cancel was chosen -3:           OK was chosen but no data had been input into field</td>
</tr>
<tr>
<td>InputDialogString</td>
<td>54</td>
<td>$a0 = address of null-terminated string that is the message to user $a1           = address of input buffer $a2 = maximum number of characters to           read</td>
<td style="text-align:center"><em>See Service 8 note below table</em> $a1 contains status value 0:           OK status. Buffer contains the input string. -2: Cancel was           chosen. No change to buffer. -3: OK was chosen but no data had           been input into field. No change to buffer. -4: length of the           input string exceeded the specified maximum. Buffer contains the           maximum allowable input string plus a terminating null.</td>
</tr>
<tr>
<td>MessageDialog</td>
<td>55</td>
<td>$a0 = address of null-terminated string that is the message to user $a1           = the type of message to be displayed: 0: error message,           indicated by Error icon           1: information message, indicated by Information icon           2: warning message, indicated by Warning icon           3: question message, indicated by Question icon           other: plain message (no icon displayed)</td>
<td style="text-align:center">N/A</td>
</tr>
<tr>
<td>MessageDialogInt</td>
<td>56</td>
<td>$a0 = address of null-terminated string that is an information-type           message to user $a1 = int value to display in string form after           the first string</td>
<td style="text-align:center">N/A</td>
</tr>
<tr>
<td>MessageDialogFloat</td>
<td>57</td>
<td>$a0 = address of null-terminated string that is an information-type           message to user $f12 = float value to display in string form           after the first string</td>
<td style="text-align:center">N/A</td>
</tr>
<tr>
<td>MessageDialogDouble</td>
<td>58</td>
<td>$a0 = address of null-terminated string that is an information-type           message to user $f12 = double value to display in string form           after the first string</td>
<td style="text-align:center">N/A</td>
</tr>
<tr>
<td>MessageDialogString</td>
<td>59</td>
<td>$a0 = address of null-terminated string that is an information-type           message to user $a1 = address of null-terminated string to           display after the first string</td>
<td style="text-align:center">N/A</td>
</tr>
</tbody>
</table>
<p>æ³¨é‡Šï¼šæœåŠ¡ç¼–å·ä¸º30åŠä»¥ä¸Šçš„æœåŠ¡ä¸åŒ…å«åœ¨SPIMæœåŠ¡8ä¸­ã€‚å®ƒéµå¾ªUNIX 'fgetsâ€™çš„è¯­ä¹‰ã€‚å¯¹äºæŒ‡å®šé•¿åº¦nï¼Œå­—ç¬¦ä¸²çš„é•¿åº¦ä¸èƒ½è¶…è¿‡n-1ã€‚å¦‚æœé•¿åº¦å°äºn-1ï¼Œåˆ™åœ¨æœ«å°¾æ·»åŠ æ¢è¡Œç¬¦ã€‚åœ¨ä»»ä½•æƒ…å†µä¸‹ï¼Œéƒ½ä¼šç”¨ç©ºå­—ç¬¦å¡«å……ã€‚å¦‚æœnç­‰äº1ï¼Œåˆ™å¿½ç•¥è¾“å…¥å¹¶å°†ç©ºå­—ç¬¦æ”¾ç½®åœ¨ç¼“å†²åŒºåœ°å€ä¸Šã€‚å¦‚æœnå¤§äº1ï¼Œåˆ™å¿½ç•¥è¾“å…¥å¹¶ä¸”ä¸ä¼šå°†ä»»ä½•å†…å®¹å†™å…¥ç¼“å†²åŒºã€‚</p>
<p>æœåŠ¡11 - æ‰“å°ä½å­—èŠ‚æ‰€å¯¹åº”çš„ASCIIå­—ç¬¦ã€‚</p>
<p>æœåŠ¡13 - MARSå®ç°äº†ä¸‰ä¸ªæ ‡å¿—å€¼ï¼š0è¡¨ç¤ºåªè¯»ï¼Œ1è¡¨ç¤ºå¯å†™ä¸”å¯åˆ›å»ºï¼Œ9è¡¨ç¤ºå¯å†™ä¸”å¯åˆ›å»ºå’Œè¿½åŠ ã€‚å®ƒå¿½ç•¥æ¨¡å¼ã€‚å¦‚æœæ“ä½œå¤±è´¥ï¼Œåˆ™è¿”å›çš„æ–‡ä»¶æè¿°ç¬¦å°†ä¸ºè´Ÿæ•°ã€‚åº•å±‚æ–‡ä»¶I/Oå®ç°ä½¿ç”¨java.io.FileInputStream.read()è¯»å–å’Œjava.io.FileOutputStream.write()å†™å…¥ã€‚MARSå†…éƒ¨ç»´æŠ¤æ–‡ä»¶æè¿°ç¬¦ï¼Œå¹¶ä»3å¼€å§‹åˆ†é…å®ƒä»¬ã€‚æ–‡ä»¶æè¿°ç¬¦0ã€1ã€2å§‹ç»ˆç”¨äºï¼šä»æ ‡å‡†è¾“å…¥è¯»å–ã€å‘æ ‡å‡†è¾“å‡ºå†™å…¥å’Œå‘æ ‡å‡†é”™è¯¯å†™å…¥ï¼ˆè‡ªç‰ˆæœ¬4.3èµ·æ–°å¢ï¼‰ã€‚</p>
<p>æœåŠ¡13ã€14ã€15 - åœ¨MARS 3.7ä¸­ï¼Œç»“æœå¯„å­˜å™¨å·²æ›´æ”¹ä¸ºä¸SPIMå…¼å®¹ã€‚ä¹‹å‰åœ¨ã€Šè®¡ç®—æœºç»„ç»‡ä¸è®¾è®¡ã€‹çš„é™„å½•Bä¸­é”™è¯¯åœ°å°æˆäº†$a0ï¼Œç°åœ¨æ˜¯$a1ã€‚</p>
<p>æœåŠ¡17 - å¦‚æœMIPSç¨‹åºåœ¨MARSå›¾å½¢ç•Œé¢ï¼ˆGUIï¼‰çš„æ§åˆ¶ä¸‹è¿è¡Œï¼Œåˆ™å¿½ç•¥$a1ä¸­çš„é€€å‡ºä»£ç ã€‚æœåŠ¡30 - ç³»ç»Ÿæ—¶é—´æ¥è‡ªjava.util.Date.getTime()ï¼Œè¡¨ç¤ºè‡ª1970å¹´1æœˆ1æ—¥ä»¥æ¥çš„æ¯«ç§’æ•°ã€‚</p>
<p>æœåŠ¡31ã€33 - é€šè¿‡å£°å¡æ¨¡æ‹ŸMIDIè¾“å‡ºã€‚è¯¦æƒ…è§ä¸‹æ–‡ã€‚</p>
<p>æœåŠ¡40è‡³44ä½¿ç”¨Javaåº•å±‚çš„ä¼ªéšæœºæ•°ç”Ÿæˆå™¨ï¼Œç”±java.util.Randomç±»æä¾›ã€‚æ¯ä¸ªæµï¼ˆç”±$a0çš„å†…å®¹æ ‡è¯†ï¼‰éƒ½ç”±ä¸åŒçš„Randomå¯¹è±¡æ¨¡æ‹Ÿã€‚æ²¡æœ‰é»˜è®¤çš„ç§å­å€¼ï¼Œå› æ­¤å¦‚æœéœ€è¦é‡å¤çš„éšæœºåºåˆ—ï¼Œè¯·ä½¿ç”¨Set SeedæœåŠ¡ï¼ˆ40ï¼‰ã€‚</p>
<h1>å¸¸ç”¨æŒ‡ä»¤</h1>
<p><strong>str:   .asciiz â€œThe numbers are:\nâ€</strong></p>
<p># è¿™é‡Œä½¿ç”¨äº†å®ï¼Œ%i ä¸ºå­˜å‚¨å½“å‰è¡Œæ•°çš„å¯„å­˜å™¨ï¼Œ%j ä¸ºå­˜å‚¨å½“å‰åˆ—æ•°çš„å¯„å­˜å™¨ # æŠŠ (%i * 8 + %j) * 4 å­˜å…¥ %ans å¯„å­˜å™¨ä¸­</p>
<p>.macro  getindex(%ans, %i, %<strong>j)</strong><br>
<strong>sll</strong> %ans, %i, 3             #%ans = %i * 8<br>
<strong>add</strong> %ans, %ans, %<strong>j</strong>          #%ans = %ans + %j<br>
<strong>sll</strong> %ans, %ans, 2           # %ans = %ans * 4 .end_macro</p>
<p>åœ¨æ±‡ç¼–ç¨‹åºä¸­ï¼Œè¿˜æœ‰ä¸€ç§å’ŒCè¯­è¨€ä¸­ #define ç±»ä¼¼çš„å®å®šä¹‰ï¼Œä¸€èˆ¬ç”¨äºå¸¸é‡çš„å®šä¹‰ä¸Šï¼Œé‚£å°±æ˜¯ <code>.eqv</code>ã€‚<code>.eqv</code> ç”¨æ³•å¦‚ä¸‹ï¼š</p>
<p>.eqv EQV_NAME string</p>
<p><strong>li</strong> $t0, 0                  # $t0=0</p>
<p><strong>la</strong>  $a0, str   åœ°å€</p>
<p><strong>beq</strong> $t0, $s0, loop_in_end  # $t0 == $s0 çš„æ—¶å€™è·³å‡ºå¾ªç¯</p>
<p><strong>bne</strong> ä¸ç›¸ç­‰æ—¶</p>
<p><strong>array</strong>: .space 40           # å­˜å‚¨è¿™äº›æ•°éœ€è¦ç”¨åˆ°æ•°ç»„ï¼Œæ•°ç»„éœ€è¦ä½¿ç”¨ 10 * 4 = 40 å­—èŠ‚                           # ä¸€ä¸ª int æ•´æ•°éœ€è¦å ç”¨ 4 ä¸ªå­—èŠ‚ï¼Œéœ€è¦å­˜å‚¨ 10 ä¸ª int æ•´æ•°                           # å› æ­¤ï¼Œarray[0] çš„åœ°å€ä¸º 0x00ï¼Œarray[1] çš„åœ°å€ä¸º 0x04                           # array[2] çš„åœ°å€ä¸º 0x08ï¼Œä»¥æ­¤ç±»æ¨ã€‚</p>
<p><strong>sll</strong> $t1, $t0, 2            # $t1 = $t0 &lt;&lt; 2ï¼Œå³ $t1 = $t0 * 4</p>
<p><strong>sw</strong> $v0, array($t1)         # æŠŠè¾“å…¥çš„æ•°v0å­˜å…¥åœ°å€ä¸º array + $t1 çš„å†…å­˜ä¸­</p>
<p><strong>lw</strong> $a0, array($t1)         # æŠŠå†…å­˜ä¸­åœ°å€ä¸º array + $t1 çš„æ•°å–å‡ºåˆ° $a0 ä¸­</p>
<p><strong>addi</strong> $t0, $t0, 1           # $t0 = $t0 + 1</p>
<p><strong>add</strong> $t0, $t0, $a0           # $t0 = $t0 + $a0</p>
<p><strong>jal</strong> f #è·³è½¬åˆ°å‡½æ•°fï¼Œå¹¶ä¸”å°†$raå˜ä¸ºä¸‹ä¸€å¥åœ°å€</p>
<p><strong>jr</strong> $ra è·³è½¬åˆ°å¯„å­˜å™¨$ra</p>
<h1>ä» CO åˆ° OSï¼šMIPS ç›¸å…³çŸ¥è¯†è¡¥å……</h1>
<blockquote>
<p><em><strong>æœ¬èŠ‚æ‘˜å–è‡ªBUAA-OS2025è¯¾ç¨‹å®˜æ–¹æ–‡æ¡£ï¼Œä»…ä½œè‡ªç”¨å‚è€ƒï¼Œå¦‚æœ‰ä¾µæƒå’Œè¿åç›¸å…³æ¡ä¾‹ï¼Œè”ç³»ä½œè€…å°†ç«‹å³åˆ é™¤</strong></em></p>
</blockquote>
<h2 id="å›é¡¾">å›é¡¾</h2>
<p>åœ¨ä¸Šå­¦æœŸçš„è®¡ç»„è¯¾ç¨‹ä¸­ï¼Œæˆ‘ä»¬å®ç°äº†ä¸€ä¸ªå¯ä»¥ä¸å¤–è®¾äº¤äº’ï¼Œå“åº”å¹¶å¤„ç†ä¸­æ–­ã€å¼‚å¸¸çš„ MIPS CPUã€‚</p>
<p>ä½ æ˜¯å¦å¥½å¥‡ï¼ŒCPU æ˜¯å¦‚ä½•è¿è¡Œæ“ä½œç³»ç»Ÿçš„ï¼Ÿè®¡ç»„çŸ¥è¯†åˆæ˜¯å¦‚ä½•å’Œ OS å®éªŒè¡”æ¥èµ·æ¥çš„ï¼Ÿ</p>
<p>ä¸‹é¢ï¼Œæˆ‘ä»¬å°†ä»‹ç»æ“ä½œç³»ç»Ÿå®éªŒä½¿ç”¨çš„ CPU ä¸æˆ‘ä»¬è®¡ç»„çš„è¯¾è®¾ CPU çš„ä¸åŒä¹‹å¤„ï¼Œå¹¶å¯¹ MIPS æ±‡ç¼–ç›¸å…³çŸ¥è¯†è¿›è¡Œè¡¥å……ã€‚</p>
<p>æ“ä½œç³»ç»Ÿå®éªŒä½¿ç”¨ MIPS32 4Kc CPUï¼Œ è¿™æ˜¯ä¸€æ¬¾ç”± MIPSÂ® Technologies å…¬å¸å¼€å‘çš„ä½¿ç”¨ MIPS32 æŒ‡ä»¤é›†çš„å•†ä¸šå¤„ç†å™¨æ ¸ã€‚</p>
<p>è€Œè®¡ç»„ä¸­å®ç°çš„ CPU ä½¿ç”¨ MIPS-C æŒ‡ä»¤é›†ï¼ŒMIPS-C æŒ‡ä»¤é›†æ˜¯ MIPS32 æŒ‡ä»¤é›†çš„ç²¾ç®€ç‰ˆæœ¬ï¼Œä¹Ÿå°±æ˜¯ç›¸å½“äºè®¡ç»„å®ç°çš„ CPU æŒ‡ä»¤é›†å’ŒåŠŸèƒ½æ˜¯æ“ä½œç³»ç»Ÿå®éªŒä¸­ä½¿ç”¨çš„ä¸€ä¸ªå­é›†ã€‚</p>
<p>å…·ä½“è°ˆåŠæ“ä½œç³»ç»Ÿå®éªŒä¸­æ¶‰åŠï¼Œè€Œè®¡ç»„ CPU ä¸å®Œæ•´çš„åŠŸèƒ½ï¼Œä¸»è¦æ˜¯æœ‰ä¸¤ä¸ªéƒ¨åˆ†ï¼šè®¿å­˜æµç¨‹ã€CP0åå¤„ç†å™¨ç›¸å…³ã€‚</p>
<h2 id="è®¿å­˜æµç¨‹">è®¿å­˜æµç¨‹</h2>
<p>åœ¨è®¡ç»„ä¸­ï¼Œæˆ‘ä»¬çš„ CPU ä¸å­˜åœ¨<strong>è™šæ‹Ÿåœ°å€</strong>æœºåˆ¶ï¼Œè®¿å­˜æŒ‡ä»¤ä¸­çš„æ‰€æœ‰åœ°å€å‡æ˜¯ç‰©ç†åœ°å€ã€‚ç‰©ç†åœ°å€è¢«ç›´æ¥å‘é€åˆ° DMã€IM ä¸­ï¼Œç›´æ¥è·å–æ•°æ®ã€‚è¿™ç®€åŒ–äº† MIPS32 çš„è®¿å­˜æµç¨‹ï¼Œè®©å¤§å®¶å¯ä»¥æ›´å¤šçš„å…³æ³¨ CPU å†…éƒ¨è®¡ç®—ä¸æ§åˆ¶é€»è¾‘ã€‚</p>
<p>è€Œåœ¨å®Œæ•´çš„ MIPS32 è®¿å­˜æµç¨‹ä¸­ï¼Œæ±‡ç¼–æŒ‡ä»¤ <strong>ä¸ç›´æ¥å’Œç‰©ç†å†…å­˜æ‰“äº¤é“</strong>ã€‚</p>
<p>è®¿å­˜æŒ‡ä»¤ä¸­çš„åœ°å€ï¼Œè¢«ç§°ä½œ<strong>è™šæ‹Ÿåœ°å€</strong>ï¼Œåœ¨æ‰§è¡Œè®¿å­˜æ“ä½œçš„æ—¶å€™ï¼Œè™šæ‹Ÿåœ°å€ä¼šå…ˆè¢«é€å…¥ <strong>MMU</strong> è¿›è¡Œ<strong>åœ°å€ç¿»è¯‘</strong>ã€<strong>æƒé™æ£€æŸ¥</strong>ï¼Œæœ€ç»ˆæ‹¿åˆ°ç‰©ç†åœ°å€ã€‚</p>
<p>å¯¹äº MMU æ£€æŸ¥åˆæ³•çš„è®¿å­˜æ“ä½œï¼Œé€šè¿‡ MMU æ‹¿åˆ°ç‰©ç†åœ°å€ä¹‹åï¼Œç›¸åº”è®¿å­˜æ“ä½œæ‰ä¼šè¿›ä¸€æ­¥è¢«å®é™…åœ¨ç‰©ç†åœ°å€ä¸Šæ‰§è¡Œã€‚</p>
<p>æ‰€æœ‰çš„è½¯ä»¶ï¼ˆåŒ…æ‹¬ MIPS æ±‡ç¼–ã€C è¯­è¨€ç¼–å†™çš„è½¯ä»¶ç­‰ï¼‰è®¿å­˜çš„åœ°å€éƒ½æ˜¯è™šæ‹Ÿåœ°å€ã€‚</p>
<p>MIPS32 çš„ MMU æ”¯æŒåŸºäº <strong>TLB</strong> çš„ <strong>é¡µå¼åœ°å€ç¿»è¯‘</strong>ï¼Œè€Œæ“ä½œç³»ç»Ÿå®éªŒä½¿ç”¨äº† MIPS32 çš„è¿™ä¸ªåœ°å€ç¿»è¯‘åŠŸèƒ½ã€‚è¿™ä¸€éƒ¨åˆ†åœ¨è®¡ç»„çš„ CPU ä¸­å¹¶æ²¡æœ‰æ¶‰åŠã€‚</p>
<p>è¿™å°†ç‰µæ‰¯å‡ºæˆ‘ä»¬OSä¸­çš„ä¸¤ä¸ªçŸ¥è¯†ç‚¹ï¼šMIPS32 å…·ä½“è®¿å­˜æµç¨‹ã€TLB åœ¨ MIPS32 åœ°å€ç¿»è¯‘ä¸­æ‰®æ¼”çš„è§’è‰²ã€‚å…·ä½“å†…å®¹å°†åœ¨æˆ‘ä»¬ Lab2 å†…å­˜ç®¡ç†ä¸­å­¦åˆ°ï¼Œåœ¨ pre ä¸­æˆ‘ä»¬ä»…ä»‹ç»åˆ°æ­¤ã€‚</p>
<p>ç›®å‰ï¼Œåªéœ€è¦å¤§å®¶ç‰¢è®°ï¼Œåœ¨ MIPS32 æŒ‡ä»¤é›†ä¸­ï¼Œæˆ‘ä»¬çš„è®¿å­˜æŒ‡ä»¤ä¸å†ç›´æ¥æ“ä½œç‰©ç†åœ°å€ï¼Œè€Œæ˜¯ä½¿ç”¨è™šæ‹Ÿåœ°å€ä»¥åŠåœ°å€ç¿»è¯‘æœºåˆ¶ï¼Œé—´æ¥ç®¡ç†ç‰©ç†å†…å­˜ã€‚</p>
<h2 id="CP0-åå¤„ç†å™¨ç›¸å…³">CP0 åå¤„ç†å™¨ç›¸å…³</h2>
<p>è®¡ç»„è¯¾ç¨‹ä¸­ CPU çš„åå¤„ç†å™¨ CP0 åŸºæœ¬åªè´Ÿè´£ä¸­æ–­ä¸å¼‚å¸¸çš„ç›¸å…³å¤„ç†ã€‚</p>
<p>è€Œ MIPS32 æŒ‡ä»¤é›†çš„ CP0 æ›´ä¸ºå¤æ‚ï¼Œä¹Ÿå…·æœ‰æ›´å¤šåŠŸèƒ½ï¼Œæ•´ä½“ä¸Š CP0 ç”¨äºå¯¹æ•´ä¸ªå¤„ç†å™¨çš„çŠ¶æ€è¿›è¡Œç»´æŠ¤å’Œæ§åˆ¶ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºå¯¹äºä¸­æ–­åŠå¼‚å¸¸ä¿¡æ¯çš„è®°å½•ã€ç‰¹æƒç®¡ç†ã€åœ°å€ç¿»è¯‘æ§åˆ¶ç­‰ã€‚</p>
<p>å…³äºæ§åˆ¶åœ°å€ç¿»è¯‘çš„åŠŸèƒ½ï¼Œå°†åœ¨ Lab2 çš„å®éªŒä¸­å…·ä½“æ¶‰åŠï¼Œæˆ‘ä»¬å…ˆç®€å•çœ‹ä¸€ä¸‹å‰ä¸¤ä¸ª CP0 çš„åŠŸèƒ½ã€‚</p>
<h3 id="ä¸­æ–­å¼‚å¸¸ç›¸å…³">ä¸­æ–­å¼‚å¸¸ç›¸å…³</h3>
<p>å¯¹äºä¸­æ–­åŠå¼‚å¸¸çš„å¤„ç†ï¼ŒMIPS32 æ¯” MIPS-C çš„è¦å¤æ‚ä¸€äº›ï¼Œè€Œæˆ‘ä»¬å®éªŒä¸­ä½¿ç”¨çš„éƒ¨åˆ†ä¸»è¦æ¶‰åŠ CP0 çš„ä¸€äº›å¯„å­˜å™¨ï¼š Causeã€EPCã€BadVAddr ã€‚</p>
<p>å…¶ä¸­ Cause ä¸ EPC å¯„å­˜å™¨åœ¨ MIPS32 ä¸ MIPS-C ä¸­å‡å­˜åœ¨ï¼Œå…¶å®šä¹‰ä¹Ÿæ˜¯ç›¸ä¼¼çš„ï¼Œè€Œ BadVAddr åˆ™ä¸å­˜åœ¨äº MIPS-C ä¸­ã€‚</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/09/22/mipscommand/mips32-Cause.webp" class="" title="mips-Cause">
<p>Cause å¯„å­˜å™¨ï¼šä¸Šå›¾æ˜¯ MIPS32 ä¸­å®šä¹‰çš„ Cause å¯„å­˜å™¨ï¼Œå…¶ä¸­ä¿å­˜ç€ CPU ä¸­å“ªä¸€äº›ä¸­æ–­æˆ–è€…å¼‚å¸¸å‘ç”Ÿäº†ã€‚ 15-8 ä½æŒ‡ç¤ºäº†å“ªä¸€äº›ä¸­æ–­ç­‰å¾…å¤„ç†ï¼Œå…¶ä¸­ 15-10 ä½æ¥è‡ªç¡¬ä»¶ï¼Œ9-8 ä½å¯ä»¥ç”±è½¯ä»¶å†™å…¥ã€‚å½“ä¸­æ–­è¯·æ±‚å‘ç”Ÿæ—¶ï¼ŒCause å¯„å­˜å™¨å¯¹åº”ä½ç½® 1ã€‚ 6-2 ä½åˆ™è®°å½•å‘ç”Ÿçš„å¼‚å¸¸å·ï¼Œä¾›è½¯ä»¶è¿›è¡ŒåŒºåˆ«ã€‚è¿˜éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ 31ä½ BDï¼Œå½“è¿™ä¸€ä½ä¸º1æ—¶ï¼Œè¡¨æ˜å‘ç”Ÿå¼‚å¸¸çš„æŒ‡ä»¤ä½äºå»¶è¿Ÿæ§½ï¼Œè½¯ä»¶åœ¨å¤„ç†å…¶å¼‚å¸¸æ—¶éœ€è¦ç‰¹åˆ«ç‰¹æ®Šå¤„ç†ã€‚</p>
<p>EPC å¯„å­˜å™¨ï¼š EPC å¯„å­˜å™¨å­˜æ”¾å¼‚å¸¸å‘ç”Ÿçš„æŒ‡ä»¤å¯¹åº” PC åœ°å€ï¼Œè½¯ä»¶åœ¨å®Œæˆå¼‚å¸¸å¤„ç†ä¹‹åï¼Œå¯ä»¥æ ¹æ®æ­¤ PC è¿”å›ã€‚</p>
<p>BadVAddr å¯„å­˜å™¨ï¼š åœ¨æˆ‘ä»¬å‰æ–‡çš„è®¿å­˜æµç¨‹ä¸­æœ‰æåˆ°ï¼Œè‹¥è®¿å­˜æ“ä½œåˆæ³•ï¼Œå…·ä½“çš„æ“ä½œæ‰ä¼šè¢«æ‰§è¡Œã€‚ä¸åˆæ³•çš„è®¿å­˜æ“ä½œåˆ™ä¼šè§¦å‘å¼‚å¸¸ï¼Œå½“è®¿å­˜ç›¸å…³çš„å¼‚å¸¸è¢«è§¦å‘æ—¶ï¼Œè¿™ä¸ªå¯„å­˜å™¨å°†ä¼šè¢«ç”¨æ¥è®°å½•è§¦å‘å¼‚å¸¸çš„è®¿å­˜åœ°å€ä¾›è½¯ä»¶è¿›è¡Œå¤„ç†ã€‚</p>
<p>è®¡ç»„è¯¾ç¨‹ç€é‡äºå®ç°ä¸€ä¸ªç®€ç•¥çš„ç¡¬ä»¶ CP0 ï¼Œå¹¶ä¸å…³æ³¨è½¯ä»¶å®ç°çš„éƒ¨åˆ†ï¼Œè€Œæ“ä½œç³»ç»Ÿè¯¾ç¨‹æ›´å¤šå…³æ³¨é…åˆç¡¬ä»¶çš„è½¯ä»¶éƒ¨åˆ†ï¼ˆå³æ“ä½œç³»ç»Ÿæœ¬èº«ï¼‰ã€‚</p>
<h3 id="ç‰¹æƒç®¡ç†ç›¸å…³">ç‰¹æƒç®¡ç†ç›¸å…³</h3>
<p>åœ¨ MIPS-C ä¸­ï¼Œæˆ‘ä»¬çš„å¤„ç†å™¨åªæœ‰ä¸€ä¸ª<strong>ç‰¹æƒæ¨¡å¼</strong>ï¼Œå¯¹äºæ‰€æœ‰æŒ‡ä»¤ï¼Œå‡ä¸€è§†åŒä»çš„åœ¨è¿™ä¸ª<strong>ç‰¹æƒæ¨¡å¼</strong>ä¸‹ï¼Œæ‰€æœ‰æ“ä½œå‡è¢«å…è®¸æ‰§è¡Œã€‚è€Œ MIPS32 ä¸­ï¼Œåˆ™å®šä¹‰äº†å¤šç§ç‰¹æƒæ¨¡å¼ï¼Œæˆ‘ä»¬ä¸»è¦ä½¿ç”¨çš„ä¸¤ç§çŠ¶æ€è¢«å«åš<strong>ç”¨æˆ·æ€</strong>ã€<strong>å†…æ ¸æ€</strong>ã€‚</p>
<p>åœ¨å†…æ ¸æ€ä¸‹ï¼ŒCPU å¯ä»¥æ‰§è¡Œå…¶æ¶æ„å…è®¸çš„ä»»ä½•æ“ä½œï¼›å¯ä»¥æ‰§è¡Œä»»ä½•æŒ‡ä»¤ã€å¯åŠ¨ä»»ä½• I/O æ“ä½œã€è®¿é—®ä»»ä½•å†…å­˜åŒºåŸŸç­‰ç­‰ã€‚åœ¨å…¶ä»–ç‰¹æƒæ¨¡å¼ä¸‹ï¼Œ CPU å…è®¸æ‰§è¡Œçš„æ“ä½œæ”¶åˆ°ç¡¬ä»¶é™åˆ¶é™åˆ¶ã€‚é€šå¸¸ï¼ŒæŸäº›ç‰¹æ®ŠæŒ‡ä»¤æ˜¯ä¸è¢«å…è®¸çš„ï¼ˆå…·ä½“è€Œè¨€ï¼Œé€šå¸¸æ˜¯å½±å“è®¡ç®—æœºæ§åˆ¶æˆ–è€…å®Œæˆ I/O æ“ä½œçš„æŒ‡ä»¤ï¼‰ï¼ŒæŸäº›å†…å­˜åŒºåŸŸä¹Ÿæ— æ³•è®¿é—®ï¼Œç­‰ç­‰ã€‚</p>
<blockquote>
<p>å†…æ ¸æ€å³è®¡ç»„å®éªŒä¸­æ‰€æåˆ°çš„ç‰¹æƒæ€ï¼Œç”¨æˆ·æ€å°±æ˜¯éç‰¹æƒæ€ã€‚</p>
<p>æ“ä½œç³»ç»Ÿå€ŸåŠ© CPU çš„è¿™å¥—ç¡¬ä»¶ç‰¹æƒæ§åˆ¶æœºåˆ¶ï¼Œå®ç°å¯¹å¹¶å‘è¿è¡Œçš„ä¸åŒç”¨æˆ·ç¨‹åºçš„éš”ç¦»ï¼Œä»¥åŠå¯¹è®¡ç®—æœºæ•´ä½“å®‰å…¨çš„ä¿æŠ¤ã€‚</p>
<p>è¯•æƒ³è‹¥ CPU ä¸å­˜åœ¨è¿™æ ·ä¸€ç§ç‰¹æƒæ§åˆ¶æœºåˆ¶ï¼Œé‚£ä¹ˆä»»æ„ç”¨æˆ·ç¨‹åºéƒ½å¯è§†ä¸ºå…·æœ‰ä¸æ“ä½œç³»ç»ŸåŒç­‰çš„åœ°ä½ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œç”¨æˆ·ç¨‹åºå¯ä»¥å®Œå…¨è„±ç¦»æ“ä½œç³»ç»Ÿçš„ç®¡ç†ä¸æ§åˆ¶ï¼Œè¿™æ˜¯ä¸å®‰å…¨çš„ã€‚</p>
</blockquote>
<p>è¿™äº›å†…å®¹ä¼šåœ¨æˆ‘ä»¬ Lab3 è¿›ç¨‹ä¸å¼‚å¸¸ç­‰å®éªŒä¸­å…·ä½“æ¶‰åŠåˆ°ã€‚åœ¨ pre ä¸­ï¼Œæˆ‘ä»¬åªéœ€è¦å…ˆå»ºç«‹èµ·åŸºæœ¬çš„é¢„å¤‡æ¦‚å¿µã€‚</p>
<p>ä¸å¤„ç†å™¨çŠ¶æ€ç›¸å…³çš„å¯„å­˜å™¨ï¼Œä¸»è¦æ˜¯ Status å¯„å­˜å™¨ï¼Œå®ƒæ§åˆ¶å¤„ç†å™¨æ•´ä½“å·¥ä½œæ¨¡å¼ã€‚åœ¨è®¡ç»„çš„ CP0 ä¸­ï¼Œä¹Ÿå­˜åœ¨ä¸€ä¸ª Status å¯„å­˜å™¨ï¼Œä¸è¿‡åœ¨å½“æ—¶ï¼Œæˆ‘ä»¬åªä½¿ç”¨äº†å…¶å¯¹ä¸­æ–­ä½¿èƒ½æ§åˆ¶çš„åŠŸèƒ½ã€‚</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/09/22/mipscommand/mips32-Status.webp" class="" title="mips-Status">
<p>Status å¯„å­˜å™¨ï¼š ä¸Šå›¾æ˜¯ MIPS32 ä¸­å®šä¹‰çš„ Status å¯„å­˜å™¨ï¼Œå…¶æ§åˆ¶æ•´ä¸ªå¤„ç†å™¨çŠ¶æ€ã€‚å…¶å®Œæ•´å®šä¹‰æ¯”è¾ƒå¤æ‚ï¼Œæˆ‘ä»¬åªç”¨å…³æ³¨å…¶ä¸­éƒ¨åˆ†ä½å³å¯ã€‚Status å¯„å­˜å™¨çš„ç¬¬ 0 ä½ï¼Œæ˜¯å…¨å±€ä¸­æ–­ä½¿èƒ½ä½ã€‚åªæœ‰è¿™ä¸€ä½é…ç½®ä¸º 1 ï¼Œå¤„ç†å™¨æ‰å¯ä»¥å“åº”ä¸­æ–­ã€‚ç¬¬ 15-8 ä¸ºä¸­æ–­ä½¿èƒ½ä½ï¼Œåˆ†åˆ«æ§åˆ¶ 8 ä¸ªä¸­æ–­è¾“å…¥çš„ä½¿èƒ½ã€‚ç¬¬ 4 ä½ UM ä¸ ç¬¬ 1 ä½ EXL åˆ™ç”¨äºæ§åˆ¶å¤„ç†å™¨çš„ç‰¹æƒæ¨¡å¼ã€‚å½“ä¸”ä»…å½“ UM ä¸º 1 ä¸” EXL ä¸º 0 æ—¶ï¼Œå¤„ç†å™¨è¿è¡Œåœ¨ç”¨æˆ·æ€ï¼Œå…¶å®ƒçŠ¶æ€ä¸‹ï¼Œå¤„ç†å™¨å‡è¿è¡Œäºå†…æ ¸æ€ã€‚</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/09/22/mipscommand/drawio.webp" class="">
<p>è®¡ç»„ä¸­ï¼Œæˆ‘ä»¬ CPU åªèƒ½ä¸€æ¬¡è¿è¡Œä¸€ä¸ªæˆ‘ä»¬ç¼–å†™çš„ MIPS æ±‡ç¼–ç¨‹åºã€‚è€Œåœ¨æ“ä½œç³»ç»Ÿä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ“ä½œç³»ç»Ÿé…åˆç¡¬ä»¶æ—¶é’Ÿä¸­æ–­ç»™ä¸åŒè¿›ç¨‹åˆ†é… CPU æ—¶é—´ï¼Œä½¿å¾— CPU åœ¨æ‰§è¡Œä¸åŒè¿›ç¨‹é—´åˆ‡æ¢ï¼Œå®ç°å¤šä¸ªè¿›ç¨‹çš„å¹¶å‘æ‰§è¡Œã€‚</p>
<p>å¯¹äº MIPS ä½“ç³»ç»“æ„æ¥è¯´å®æ—¶é’Ÿä¸­æ–­äº§ç”Ÿæ—¶ï¼Œå°±ä¼šè§¦å‘ä¸­æ–­ï¼Œå°† PC æŒ‡å‘å¼‚å¸¸å¤„ç†ç¨‹åºå…¥å£ã€‚å¼‚å¸¸å¤„ç†ç¨‹åºé¦–å…ˆä¿å­˜ç°åœºï¼Œæ­¤åæ ¹æ® Cause å¯„å­˜å™¨ä¸­çš„æƒ…å†µè¿›è¡Œå¼‚å¸¸åˆ†å‘ï¼Œè½¬åˆ°å†…æ ¸çš„ä¸åŒå¼‚å¸¸å¤„ç†å­ç¨‹åºã€‚åŒå­¦ä»¬å°†åœ¨ Lab3 ä¸­ï¼Œçœ‹åˆ°å…¶å…·ä½“å®ç°ã€‚</p>
<h2 id="MIPS-Calling-Convention">MIPS Calling Convention</h2>
<p>æœ¬ç« å†…å®¹ç²¾ç®€è‡ª<a target="_blank" rel="noopener" href="https://os.buaa.edu.cn/tutorial-embedded/2025%E6%98%A5-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/assets/MIPSCallingConventionsSummary.pdf">MIPS Calling Conventions Summary</a></p>
<h3 id="é€šç”¨å¯„å­˜å™¨">é€šç”¨å¯„å­˜å™¨</h3>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬å›å¿†ä¸€ä¸‹è®¡ç»„ä¸­å­¦è¿‡çš„ MIPS çš„ 32 ä¸ªé€šç”¨å¯„å­˜å™¨ã€‚</p>
<table>
<thead>
<tr>
<th style="text-align:left">å¯„å­˜å™¨ç¼–å·</th>
<th style="text-align:left">åŠ©è®°ç¬¦</th>
<th style="text-align:left">ç”¨é€”</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">0</td>
<td style="text-align:left">zero</td>
<td style="text-align:left">å€¼æ€»æ˜¯ä¸º 0</td>
</tr>
<tr>
<td style="text-align:left">1</td>
<td style="text-align:left">at</td>
<td style="text-align:left">ï¼ˆæ±‡ç¼–æš‚å­˜å¯„å­˜å™¨ï¼‰ä¸€èˆ¬ç”±æ±‡ç¼–å™¨ä½œä¸ºä¸´æ—¶å¯„å­˜å™¨ä½¿ç”¨ã€‚</td>
</tr>
<tr>
<td style="text-align:left">2-3</td>
<td style="text-align:left">v0-v1</td>
<td style="text-align:left">ç”¨äºå­˜æ”¾è¡¨è¾¾å¼çš„å€¼æˆ–å‡½æ•°çš„æ•´å½¢ã€æŒ‡é’ˆç±»å‹è¿”å›å€¼ã€‚</td>
</tr>
<tr>
<td style="text-align:left">4-7</td>
<td style="text-align:left">a0-a3</td>
<td style="text-align:left">ç”¨äºå‡½æ•°ä¼ å‚ã€‚å…¶å€¼åœ¨å‡½æ•°è°ƒç”¨çš„è¿‡ç¨‹ä¸­ä¸ä¼šè¢«ä¿å­˜ã€‚è‹¥å‡½æ•°å‚æ•°è¾ƒå¤šï¼Œå¤šå‡ºæ¥çš„å‚æ•°ä¼šé‡‡ç”¨æ ˆè¿›è¡Œä¼ é€’ã€‚</td>
</tr>
<tr>
<td style="text-align:left">8-15</td>
<td style="text-align:left">t0-t7</td>
<td style="text-align:left">ç”¨äºå­˜æ”¾è¡¨è¾¾å¼çš„å€¼çš„ä¸´æ—¶å¯„å­˜å™¨; å…¶å€¼åœ¨å‡½æ•°è°ƒç”¨çš„è¿‡ç¨‹ä¸­ä¸ä¼šè¢«ä¿å­˜ã€‚</td>
</tr>
<tr>
<td style="text-align:left"><strong>16-23</strong></td>
<td style="text-align:left"><strong>s0-s7</strong></td>
<td style="text-align:left"><strong>ä¿å­˜å¯„å­˜å™¨; è¿™äº›å¯„å­˜å™¨ä¸­çš„å€¼åœ¨ç»è¿‡å‡½æ•°è°ƒç”¨åä¸ä¼šè¢«æ”¹å˜ã€‚</strong></td>
</tr>
<tr>
<td style="text-align:left">24-25</td>
<td style="text-align:left">t8-t9</td>
<td style="text-align:left">ç”¨äºå­˜æ”¾è¡¨è¾¾å¼çš„å€¼çš„ä¸´æ—¶å¯„å­˜å™¨; å…¶å€¼åœ¨å‡½æ•°è°ƒç”¨çš„è¿‡ç¨‹ä¸­ä¸ä¼šè¢«ä¿å­˜ã€‚</td>
</tr>
<tr>
<td style="text-align:left">26-27</td>
<td style="text-align:left">k0-k1</td>
<td style="text-align:left">ä»…åœ¨å†…æ ¸æ€ä¸‹ä½¿ç”¨ã€‚</td>
</tr>
<tr>
<td style="text-align:left"><strong>28</strong></td>
<td style="text-align:left"><strong>gp</strong></td>
<td style="text-align:left"><strong>å…¨å±€æŒ‡é’ˆå’Œå†…å®¹æŒ‡é’ˆã€‚</strong></td>
</tr>
<tr>
<td style="text-align:left"><strong>29</strong></td>
<td style="text-align:left"><strong>sp</strong></td>
<td style="text-align:left"><strong>æ ˆæŒ‡é’ˆã€‚</strong></td>
</tr>
<tr>
<td style="text-align:left"><strong>30</strong></td>
<td style="text-align:left"><strong>fpæˆ–s8</strong></td>
<td style="text-align:left"><strong>ä¿å­˜å¯„å­˜å™¨ï¼ˆåŒ s0-s7ï¼‰ã€‚ä¹Ÿå¯ç”¨ä½œå¸§æŒ‡é’ˆã€‚</strong></td>
</tr>
<tr>
<td style="text-align:left"><strong>31</strong></td>
<td style="text-align:left"><strong>ra</strong></td>
<td style="text-align:left"><strong>å‡½æ•°è¿”å›åœ°å€ã€‚</strong></td>
</tr>
</tbody>
</table>
<p>å…¶ä¸­åŠ ç²—çš„éƒ¨åˆ†ï¼Œæ˜¯æˆ‘ä»¬åœ¨å‡½æ•°è°ƒç”¨ä¸­éœ€è¦ä¿ç•™å…¶å€¼çš„å¯„å­˜å™¨ã€‚</p>
<h3 id="æ ˆå¸§">æ ˆå¸§</h3>
<p>æ¯æ¬¡è°ƒç”¨ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œéƒ½ä¼šä¸ºè¯¥å‡½æ•°åˆ›å»ºä¸€ä¸ªå”¯ä¸€çš„æ ˆå¸§ã€‚</p>
<p>æ ˆå¸§çš„ç»“æ„å¾ˆé‡è¦ã€‚å®ƒåœ¨è°ƒç”¨è€…å’Œè¢«è°ƒç”¨è€…ä¹‹é—´å½¢æˆäº†ä¸€ä¸ªå¥‘çº¦ï¼Œå®ƒå®šä¹‰äº†å‚æ•°åœ¨è°ƒç”¨è€…å’Œè¢«è°ƒç”¨è€…ä¹‹é—´å¦‚ä½•ä¼ é€’ï¼Œä¸€ä¸ªå‡½æ•°è°ƒç”¨çš„è¿”å›å€¼å¦‚ä½•ä»è¢«è°ƒç”¨è€…ä¼ é€’ç»™è°ƒç”¨è€…ï¼Œå¹¶å®šä¹‰äº†å¦‚ä½•å…±äº«å¯„å­˜å™¨ã€‚</p>
<p>é€šå¸¸ï¼Œå‡½æ•°çš„æ ˆå¸§å¯èƒ½åŒ…å«ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š</p>
<ul>
<li>ç”¨äºå­˜å‚¨ä¼ é€’ç»™æ­¤è°ƒç”¨çš„å‡½æ•°å‚æ•°çš„ç©ºé—´ã€‚</li>
<li>å­˜å‚¨å·²ä¿å­˜å¯„å­˜å™¨å€¼çš„ä½ç½®ï¼ˆs0 åˆ° s7ï¼‰ã€‚</li>
<li>ä¸€ä¸ªå­˜å‚¨å­ç¨‹åºè¿”å›åœ°å€çš„åœ°æ–¹ï¼ˆraï¼‰ã€‚</li>
<li>ä¸€ä¸ªç”¨äºæœ¬åœ°æ•°æ®å­˜å‚¨çš„åœ°æ–¹ã€‚</li>
</ul>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/09/22/mipscommand/mips-stackframe.webp" class="" title="mips-stackframe">
<p>é¦–å…ˆï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹<strong>æ ˆå¸§çš„é»„è‰²éƒ¨åˆ†ï¼Œå³å‚æ•°éƒ¨åˆ†</strong>ã€‚å½“å‰å‡½æ•° A è°ƒç”¨å½“å‰å‡½æ•°çš„å­å‡½æ•° B æ—¶ï¼Œä¼šå°† B çš„å‚æ•°å‹å…¥å½“å‰å‡½æ•° A çš„æ ˆå¸§ä¸­çš„å‚æ•°éƒ¨åˆ†ï¼Œä»¥å®ç°å¯¹å‡½æ•°è°ƒç”¨æ—¶çš„ä¼ å‚ã€‚æ­¤å¤–ï¼Œè¿˜éœ€æ³¨æ„ï¼Œç”±äº a0-a3 å¯„å­˜å™¨ä¹Ÿå°†è¢«ç”¨ä½œä¼ å‚ï¼Œæ‰€ä»¥å‚æ•°éƒ¨åˆ†ä¸­çš„æ·¡é»„è‰²éƒ¨åˆ†ï¼ˆarg 0 è‡³ arg 3ï¼‰åªéœ€è¦ä¿ç•™æ ˆå¸§ç©ºé—´ï¼Œå¹¶ä¸å¡«å…¥å…·ä½“å‚æ•°å€¼ã€‚è‡³äºå‚æ•°ä¸ªæ•°è¶…è¿‡çš„ 4 ä¸ªçš„å­å‡½æ•°ï¼Œå½“å‰å‡½æ•° A å°±éœ€è¦å°†å¤šå‡ºæ¥çš„ç¬¬ 4 è‡³ç¬¬ n-1 ä¸ªå‚æ•°å‹å…¥æ ˆä¸­ï¼ˆarg 4 è‡³ arg n-1ï¼‰ï¼Œå®ç°å¯¹å­å‡½æ•° B çš„è°ƒç”¨ã€‚</p>
<p>éšåï¼Œæˆ‘ä»¬å†æ¥çœ‹<strong>æ ˆå¸§çš„æµ…ç»¿éƒ¨åˆ†ï¼Œå³ä¿ç•™å¯„å­˜å™¨éƒ¨åˆ†</strong>ï¼Œå‰é¢æåˆ°æˆ‘ä»¬ä¼šåœ¨å½“å‰å‡½æ•°è¢«è°ƒç”¨åï¼Œåœ¨å½“å‰å‡½æ•°æœ€å¼€å§‹ï¼Œå¤åˆ¶å½“å‰å‡½æ•°è¦ä½¿ç”¨çš„ä»»ä½•è§„å®šéœ€è¦ä¿å­˜çš„å¯„å­˜å™¨ï¼ˆs0 åˆ° s7ï¼‰çš„å€¼å‹å…¥æ ˆå¸§çš„ä¿ç•™å¯„å­˜å™¨éƒ¨åˆ†ã€‚æ­¤åï¼Œç”±äºæˆ‘ä»¬å·²ç»åœ¨æ ˆå¸§ä¸­ä¿å­˜äº†å½“å‰å‡½æ•°è¢«è°ƒç”¨æ—¶å¯„å­˜å™¨çš„æœ€åˆæ ·è²Œï¼Œåœ¨å‡½æ•°æ‰§è¡Œä¸­ï¼Œå‡½æ•°å¯ä»¥éšæ„è¯»å†™å·²ä¿å­˜å¯„å­˜å™¨ã€‚å½“å‡½æ•°æ‰§è¡Œå®Œæ¯•ï¼Œè¿”å›å‰ï¼Œæˆ‘ä»¬ä¼šå¤åŸæ ˆä¸­ä¿ç•™å¯„å­˜å™¨éƒ¨åˆ†åˆ°å¯„å­˜å™¨ä¸­ï¼Œä½¿å¾—å‡½æ•°çš„è°ƒç”¨è€…ï¼ˆçˆ¶å‡½æ•°ï¼‰ï¼Œå¯ä»¥è®¤ä¸ºåœ¨æ•´ä¸ªè°ƒç”¨è¿‡ç¨‹ä¸­ï¼Œä¿å­˜çš„å¯„å­˜å™¨æ²¡æœ‰å‘ç”Ÿå˜åŒ–ã€‚</p>
<p>æ¥ç€ï¼Œæˆ‘ä»¬æ¥çœ‹<strong>æ ˆå¸§çš„æ·±ç»¿éƒ¨åˆ†ï¼Œå³è¿”å›åœ°å€éƒ¨åˆ†</strong>ã€‚è¿”å›åœ°å€éƒ¨åˆ†ç”¨äºå­˜å‚¨ ra çš„å€¼ã€‚è¯¥å€¼åœ¨æ‰§è¡Œå½“å‰å‡½æ•°å¼€å§‹æ—¶è¢«å¤åˆ¶åˆ°æ ˆä¸­ï¼Œå¹¶åœ¨å½“å‰å‡½æ•°è¿”å›ä¹‹å‰è¢«å¤åˆ¶å› ra å¯„å­˜å™¨ä¸­ã€‚</p>
<p>æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜éœ€è¦æ³¨æ„<strong>æ ˆå¸§çš„ç°è‰²éƒ¨åˆ†ï¼Œå³å¡«å……éƒ¨åˆ†</strong>ï¼Œå…¶ä½œç”¨åœ¨äºç¡®ä¿æ ˆå¸§çš„æ€»å¤§å°æ€»æ˜¯ 8 çš„å€æ•°ã€‚åœ¨è¿™é‡Œæ’å…¥å®ƒï¼Œä»¥ç¡®ä¿å…¶ä¸Šæ–¹çš„å±€éƒ¨æ•°æ®å­˜å‚¨éƒ¨åˆ†é¦–åœ°å€æ˜¯åŒå­—å¯¹é½çš„ã€‚è¿™æ˜¯ä¸ºäº†ä¸ MIPS 64 ä½ä½“ç³»ç»“æ„çš„åŒå­—è¯»å–æŒ‡ä»¤å…¼å®¹ã€‚</p>
<p>æœ€åï¼Œæˆ‘ä»¬çœ‹<strong>æ ˆå¸§çš„è“è‰²éƒ¨åˆ†ï¼Œå³å±€éƒ¨æ•°æ®å­˜å‚¨éƒ¨åˆ†</strong>ã€‚å®ƒç”¨æ¥å­˜å‚¨å‡½æ•°çš„å±€éƒ¨å˜é‡ã€‚å‡½æ•°å¿…é¡»ä¸ºæ­¤åŒºåŸŸçš„æ‰€æœ‰å±€éƒ¨å˜é‡ä¿ç•™è¶³å¤Ÿçš„å­˜å‚¨ç©ºé—´ï¼ŒåŒ…æ‹¬éœ€è¦åœ¨å‡½æ•°è°ƒç”¨å‰åä¿ç•™çš„ä»»ä½•ä¸´æ—¶å¯„å­˜å™¨ï¼ˆt0 åˆ° t9ï¼‰å€¼çš„ç©ºé—´ã€‚</p>
<h3 id="Leaf-Nonleaf-Subroutine">Leaf &amp; Nonleaf Subroutine</h3>
<p>å¹¶ä¸æ˜¯æ¯ä¸ªå‡½æ•°éƒ½éœ€è¦å…¶æ ˆå¸§ä¸­æè¿°çš„æ¯ä¸ªéƒ¨åˆ†ã€‚ä¸€èˆ¬çš„è§„åˆ™æ˜¯ï¼Œå¦‚æœç¨‹åºä¸éœ€è¦å…¶ä¸­çš„ä¸€ä¸ªéƒ¨åˆ†ï¼Œé‚£ä¹ˆå®ƒå¯ä»¥ä»å…¶æ ˆå¸§ä¸­çœç•¥è¯¥éƒ¨åˆ†ã€‚ä¸ºäº†æ˜ç¡®è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å°†åŒºåˆ† 3 ä¸ªä¸åŒç±»åˆ«çš„å‡½æ•°ï¼š</p>
<h4 id="ç®€å•å¶å‡½æ•°ï¼ˆSimple-Leafï¼‰">ç®€å•å¶å‡½æ•°ï¼ˆSimple Leafï¼‰</h4>
<p>ä¸è°ƒç”¨ä»»ä½•å…¶ä»–å­ä¾‹ç¨‹ï¼Œä¸ä½¿ç”¨æ ˆä¸Šçš„ä»»ä½•å†…å­˜ç©ºé—´ï¼ˆå› ä¸ºå…¶ä¸éœ€è¦å†…å­˜æ¥ä¿å­˜å±€éƒ¨å˜é‡æˆ–å¯„å­˜å™¨çš„å€¼ï¼‰ã€‚è¿™æ ·çš„å‡½æ•°ä¸éœ€è¦æ ˆå¸§ï¼Œä¹Ÿä¸éœ€è¦æ›´æ”¹ spã€‚</p>
<h4 id="æœ‰å±€éƒ¨æ•°æ®çš„å¶å‡½æ•°ï¼ˆLeaf-with-Dataï¼‰">æœ‰å±€éƒ¨æ•°æ®çš„å¶å‡½æ•°ï¼ˆLeaf with Dataï¼‰</h4>
<p>éœ€è¦æ ˆç©ºé—´çš„å¶å‡½æ•°ï¼ˆä½†ä¸éœ€è¦ã€ä¸è°ƒç”¨ä»»ä½•å…¶ä»–å­ä¾‹ç¨‹ï¼‰ï¼Œå…¶æ ˆå¸§å¯ç”¨äºæœ¬åœ°å˜é‡æˆ–å¯„å­˜å™¨çš„å€¼çš„ä¿å­˜ã€‚è¿™æ ·çš„å‡½æ•°è¢«è°ƒç”¨ååº”å½“å‹æ ˆï¼ˆæ ˆå¸§å¤§å°åº”è¯¥æ˜¯ 8 çš„å€æ•°ï¼‰ã€‚ä½†æ˜¯ï¼Œra å¹¶ä¸ç”¨ä¿å­˜åœ¨æ ˆå¸§ä¸­ã€‚</p>
<h4 id="éå¶å‡½æ•°ï¼ˆNonleafï¼‰">éå¶å‡½æ•°ï¼ˆNonleafï¼‰</h4>
<p>å‡½æ•°å†…è°ƒç”¨äº†å…¶ä»–å‡½æ•°ã€‚ä¸€ä¸ªéå¶å‡½æ•°çš„æ ˆå¸§åŒ…å«äº†ä¸Šä¸€èŠ‚æ‰€è¿°çš„å¤§éƒ¨åˆ†ç»“æ„ã€‚</p>
<p>ï¼ˆå…·ä½“ä¾‹å­å‚é˜…<a target="_blank" rel="noopener" href="https://os.buaa.edu.cn/tutorial-embedded/2025%E6%98%A5-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/assets/MIPSCallingConventionsSummary.pdf">MIPS Calling Conventions Summary</a> P8ï¼‰</p>
<h2 id="MIPS-Directives-Macro">MIPS Directives &amp; Macro</h2>
<h3 id="byteã€-halfã€-wordã€-asciiã€-asciiz"><code>.byte</code>ã€<code>.half</code>ã€<code>.word</code>ã€<code>.ascii</code>ã€<code>.asciiz</code></h3>
<p>è¿™ç±»åœ¨è®¡ç»„ä¸­å¸¸è§çš„ directivesï¼Œç›¸ä¿¡åŒå­¦ä»¬éƒ½å¾ˆç†Ÿæ‚‰ï¼Œåˆ†åˆ«å¯¹åº”ç€ä¸åŒæ•°æ®çš„ç±»å‹ã€‚</p>
<h3 id="align"><code>.align</code></h3>
<p><code>.align</code> çš„ä½œç”¨æ˜¯â€œä½¿ä¸‹é¢çš„æ•°æ®è¿›è¡Œåœ°å€å¯¹é½â€ï¼Œä¸‹é¢è¿™æ®µä»£ç ä½¿å¾—ä¸‹é¢å¤§å°ä¸ºä¸€ä¸ªå­—çš„å˜é‡ <code>var</code> æŒ‰ 4 å­—èŠ‚è¿›è¡Œå¯¹é½ï¼ˆå‚æ•° x<em>x</em> ä»£è¡¨ä»¥ 2x2<em>x</em> å­—èŠ‚å¯¹é½ï¼‰</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">.align 2 # align to 4-byte boundary (2^2)</span><br><span class="line">var: .word 0</span><br></pre></td></tr></table></figure>
<p>è¯¥æŒ‡ä»¤å…è®¸ç¨‹åºå‘˜é€šè¿‡æŒ‡å®šä¸€ä¸ªé›¶å¯¹é½ï¼Œæ¥è¦†ç›–<code>.half</code>ã€<code>.word</code>ç­‰çš„è‡ªåŠ¨å¯¹é½ç‰¹æ€§ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.half 3</span><br><span class="line">.align 0 # å…³é—­è‡ªåŠ¨å¯¹é½</span><br><span class="line">.word 100 # ä½¿å¾— word ç´§è´´ç€ half</span><br></pre></td></tr></table></figure>
<h3 id="globlã€-extern"><code>.globl</code>ã€<code>.extern</code></h3>
<p>æˆ‘ä»¬åœ¨è®¡ç»„ä¸­çš„å†™çš„æ±‡ç¼–ç¨‹åºå¾€å¾€åªæœ‰ä¸€ä¸ªæ–‡ä»¶ã€‚ä½†åœ¨æ“ä½œç³»ç»Ÿè¯¾ä¸­ï¼Œå­˜åœ¨è·¨æ–‡ä»¶çš„æƒ…å†µï¼Œä¾‹å¦‚è·¨æ–‡ä»¶è°ƒç”¨å‡½æ•°ã€‚</p>
<ul>
<li><code>.globl</code>ï¼šå°†ç¬¦å·å®šä¹‰ä¸ºå…·æœ‰å¯¹å…¶ä»–æ¨¡å—å¯è§çš„å…¨å±€ç¬¦å·</li>
<li><code>.extern</code>ï¼šè¦å¯¹å¦ä¸€ä¸ªæ¨¡å—ä¸­çš„å…¨å±€ç¬¦å·çš„å¼•ç”¨ï¼ˆå³å¤–éƒ¨ç¬¦å·ï¼‰ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯æ‰€æœ‰å¯¹æ ‡ç­¾å¼•ç”¨éƒ½ä¼šè‡ªåŠ¨è¢«è®¤ä¸ºæ˜¯åœ¨å¼•ç”¨å…¨å±€ç¬¦å·ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨å¯¹å¦ä¸€æ¨¡å—ä¸­çš„å…¨å±€æ ‡ç­¾å¼•ç”¨æ—¶ï¼Œæ²¡æœ‰å¿…è¦æ·»åŠ  <code>.extern</code>ï¼ˆä½†å¯¹å¦ä¸€æ¨¡å—ä¸­çš„å…¨å±€å˜é‡å¼•ç”¨æ—¶ï¼Œéœ€è¦æ·»åŠ <code>.extern</code>ï¼‰</li>
</ul>
<p>æ­¤ååœ¨é“¾æ¥æ—¶ï¼Œé“¾æ¥å™¨è¦å°†å„ä¸ªç›®æ ‡æ–‡ä»¶çš„å†…å®¹â€œåˆä¸ºä¸€ä½“â€ï¼Œé€šè¿‡ä¸Šè¿°æ–¹å¼æ ‡è®°çš„ç¬¦å·å°±å¯ä»¥è¢«è·¨æ–‡ä»¶å¼•ç”¨ã€‚</p>
<p>ä¾‹å¦‚ï¼Œåœ¨æœªæ¥è¯¾ç¨‹è®¾è®¡çš„ <code>asm.h</code> å¤´æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†å¦‚ä¸‹å®ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#define FEXPORT(symbol)         \   # ä½¿symbolä»£æŒ‡çš„å‡½æ•°å¯¹å…¶ä»–æ¨¡å—å¯è§</span><br><span class="line">    .globl symbol;              \   # ä½¿æ ‡ç­¾å¯¹é“¾æ¥å™¨å¯è§ï¼Œä½¿å¾—å…¶å®ƒæ–‡ä»¶ä¸­å¯ä»¥è°ƒç”¨æˆ‘ä»¬ä½¿ç”¨å®å®šä¹‰å£°æ˜çš„å‡½æ•°ã€‚</span><br><span class="line">    .type symbol, @function;    \</span><br><span class="line">    symbol:</span><br></pre></td></tr></table></figure>
<p>åœ¨æœªæ¥å†…æ ¸å®éªŒçš„ <code>genex.S</code> æ±‡ç¼–æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡è¯¥å®å£°æ˜äº†ä¸€ä¸ªå…¨å±€å‡½æ•° <code>ret_from_exception</code>ï¼ˆä½ å¯ä»¥å¿½ç•¥å‡½æ•°ä¸­çš„å†…å®¹ï¼‰</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">FEXPORT(ret_from_exception)</span><br><span class="line">    /* Do Something */</span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶æˆ‘ä»¬å¯ä»¥åœ¨æœªæ¥å†…æ ¸å®éªŒçš„å¦ä¸€æ–‡ä»¶ <code>env_asm.S</code> ä¸­ï¼Œç›´æ¥è°ƒç”¨è¯¥å‡½æ•°</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">.text</span><br><span class="line">LEAF(env_pop_tf)</span><br><span class="line">    /* Do Something */</span><br><span class="line">    j       ret_from_exception # ç›´æ¥è°ƒç”¨è¯¥å‡½æ•°ï¼Œé»˜è®¤ret_from_exceptionä¸ºå…¨å±€æ ‡ç­¾ï¼Œæ— éœ€.extern</span><br><span class="line">END(env_pop_tf)</span><br></pre></td></tr></table></figure>
<h3 id="set"><code>.set</code></h3>
<p>è®¾ç½®æ±‡ç¼–å™¨çš„å·¥ä½œæ–¹å¼ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ±‡ç¼–å™¨ä¼šå°è¯•é€šè¿‡é‡æ–°æ’åˆ—æŒ‡ä»¤ï¼Œæ¥å¡«å……åˆ†æ”¯æŒ‡ä»¤å’Œå­˜å–æŒ‡ä»¤é€ æˆçš„ç©ºé—²æ—¶é—´ã€‚äº†è§£å³å¯ã€‚</p>
<ul>
<li><code>.set noreorder</code> å’Œ <code>.set reorder</code>ï¼šå‘ŠçŸ¥æ±‡ç¼–å™¨æ˜¯å¦é‡æ–°å¯¹æŒ‡ä»¤è¿›è¡Œé¡ºåºè¿›è¡Œæ’åºã€‚reorder æ¨¡å¼ä¸‹æ±‡ç¼–å™¨ä¼šè‡ªåŠ¨è°ƒåº¦æŒ‡ä»¤è‡³å»¶è¿Ÿæ§½ï¼Œnoreorder æ¨¡å¼ä¸‹éœ€è¦æ‰‹åŠ¨å¡«å……å»¶è¿Ÿæ§½ã€‚</li>
<li><code>.set at</code> å’Œ <code>.set noat</code>ï¼šat æ¨¡å¼ä¸‹ï¼Œ1 å·å¯„å­˜å™¨ï¼ˆ$atï¼‰ä¸ºæ±‡ç¼–å™¨ä¿ç•™ç”¨äºå®ç°æ‰©å±•æŒ‡ä»¤ï¼›noat æ¨¡å¼ä¸‹ï¼Œæ±‡ç¼–å™¨ä¸ä¼šä½¿ç”¨ 1 å·å¯„å­˜å™¨ã€‚</li>
</ul>
<h3 id="LEAFã€NESTEDã€END-ä¸‰ä¸ªå®"><code>LEAF</code>ã€<code>NESTED</code>ã€<code>END</code> ä¸‰ä¸ªå®</h3>
<p>åœ¨æ“ä½œç³»ç»Ÿå®éªŒä¸­ï¼Œæˆ‘ä»¬å°†å¸¸å¸¸ä¼šé‡åˆ°ä¸‰ä¸ªå’Œå‡½æ•°æœ‰å…³çš„å®ã€‚æ˜¯æˆ‘ä»¬äººä¸ºå®šä¹‰çš„</p>
<h4 id="LEAF"><code>LEAF</code></h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#define LEAF(symbol)                        \</span><br><span class="line">    .globl  symbol;                         \</span><br><span class="line">    .align  2;                              \</span><br><span class="line">    .type   symbol,@function;               \</span><br><span class="line">    .ent    symbol;                         \</span><br><span class="line">    symbol:                                 \</span><br><span class="line">    .frame  sp,0,ra</span><br></pre></td></tr></table></figure>
<ul>
<li>ç¬¬ä¸€è¡Œæ˜¯å¯¹ <code>LEAF</code> å®çš„å®šä¹‰ï¼Œåé¢æ‹¬å·ä¸­çš„ <code>symbol</code> ç±»ä¼¼äºå‡½æ•°çš„å‚æ•°ï¼Œåœ¨å®å®šä¹‰ ä¸­çš„ä½œç”¨ç±»ä¼¼ï¼Œç¼–è¯‘æ—¶åœ¨å®ä¸­ä¼šå°† <code>symbol</code> æ›¿æ¢ä¸ºå®é™…ä¼ å…¥çš„æ–‡æœ¬ï¼Œä¹Ÿå³æˆ‘ä»¬çš„å‡½æ•°åã€‚</li>
<li>ç¬¬äºŒè¡Œä¸­ï¼Œ<code>.globl</code> çš„ä½œç”¨æ˜¯â€œä½¿æ ‡ç­¾å¯¹é“¾æ¥å™¨å¯è§â€ï¼Œè¿™æ ·å³ä½¿åœ¨å…¶å®ƒæ–‡ä»¶ä¸­ä¹Ÿå¯ ä»¥å¼•ç”¨åˆ° <code>symbol</code> æ ‡ç­¾ï¼Œ<strong>ä»è€Œä½¿å¾—å…¶å®ƒæ–‡ä»¶ä¸­å¯ä»¥è°ƒç”¨æˆ‘ä»¬ä½¿ç”¨å®å®šä¹‰å£°æ˜çš„å‡½æ•°</strong>ã€‚</li>
<li>ç¬¬ä¸‰è¡Œä¸­ï¼Œ<code>.align 2</code> çš„ä½œç”¨æ˜¯â€œä½¿ä¸‹é¢çš„æ•°æ®è¿›è¡Œåœ°å€å¯¹é½â€ï¼Œè¿™ä¸€è¡Œè¯­å¥ä½¿å¾—ä¸‹é¢çš„ <code>symbol</code> æ ‡ç­¾æŒ‰ 4 Byte è¿›è¡Œå¯¹é½ï¼Œ<strong>ä»è€Œä½¿å¾—æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>jal</code> æŒ‡ä»¤è·³è½¬åˆ°è¿™ä¸ªå‡½æ•°</strong>ï¼ˆæœ«å°¾æ‹¼æ¥ä¸¤ä½ 0ï¼‰ã€‚</li>
<li>ç¬¬å››è¡Œä¸­ï¼Œ<code>.type</code> çš„ä½œç”¨æ˜¯è®¾ç½® <code>symbol</code> æ ‡ç­¾çš„ç±»åˆ«ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬è®¾ç½®äº† <code>symbol</code> æ ‡ç­¾ä¸ºå‡½æ•°æ ‡ç­¾ã€‚</li>
<li>ç¬¬äº”è¡Œä¸­ï¼Œ<code>.ent</code> çš„ä½œç”¨æ˜¯æ ‡è®°æ¯ä¸ªå‡½æ•°çš„å¼€å¤´ï¼Œéœ€è¦ä¸ <code>.end</code> é…å¯¹ä½¿ç”¨ã€‚è¿™äº›æ ‡è®°ä½¿å¾—å¯ä»¥åœ¨ Debug æ—¶æŸ¥çœ‹è°ƒç”¨é“¾</li>
</ul>
<p><code>LEAF</code>å®åœ¨ä½¿ç”¨æ—¶, æˆ‘ä»¬å¯ä»¥è¿™æ ·ç”¨ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">LEAF(msyscall)</span><br><span class="line">    // Just use &#x27;syscall&#x27; instruction and return.</span><br><span class="line">    syscall</span><br><span class="line">    jr      ra</span><br><span class="line">END(msyscall)</span><br></pre></td></tr></table></figure>
<h4 id="NESTED"><code>NESTED</code></h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#define NESTED(symbol, framesize, rpc)      \</span><br><span class="line">    .globl  symbol;                         \</span><br><span class="line">    .align  2;                              \</span><br><span class="line">    .type   symbol,@function;               \</span><br><span class="line">    .ent    symbol,0;                       \</span><br><span class="line">    symbol:                                 \</span><br><span class="line">    .frame  sp, framesize, rpc</span><br></pre></td></tr></table></figure>
<p>é€šè¿‡å¯¹æ¯”ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç° <code>LEAF</code> å®å’Œ <code>NESTED</code> å®çš„åŒºåˆ«å°±åœ¨äº <strong><code>LEAF</code> å®å®šä¹‰çš„å‡½æ•°åœ¨è¢«è°ƒç”¨æ—¶æ²¡æœ‰åˆ†é…æ ˆå¸§çš„ç©ºé—´è®°å½•è‡ªå·±çš„â€œè¿è¡ŒçŠ¶æ€â€ï¼Œ<code>NESTED</code> å®åœ¨è¢«è°ƒç”¨æ—¶åˆ†é…äº†æ ˆå¸§çš„ç©ºé—´ç”¨äºè®°å½•è‡ªå·±çš„â€œè¿è¡ŒçŠ¶æ€â€</strong>ã€‚</p>
<p><code>NESTED</code> å®åœ¨ä½¿ç”¨æ—¶, æˆ‘ä»¬å¯ä»¥è¿™æ ·ç”¨ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">NESTED(handle_int, TF_SIZE, zero)</span><br><span class="line">    mfc0    t0, CP0_CAUSE</span><br><span class="line">    mfc0    t2, CP0_STATUS</span><br><span class="line">    and     t0, t2</span><br><span class="line">    andi    t1, t0, STATUS_IM7</span><br><span class="line">    bnez    t1, timer_irq</span><br><span class="line">timer_irq:</span><br><span class="line">    li      a0, 0</span><br><span class="line">    j       schedule</span><br><span class="line">END(handle_int)</span><br></pre></td></tr></table></figure>
<h4 id="END"><code>END</code></h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#define END(function)                       \</span><br><span class="line">    .end    function;                       \</span><br><span class="line">    .size   function,.-function</span><br></pre></td></tr></table></figure>
<p>ç¬¬ä¸€è¡Œæ˜¯å¯¹ <code>END</code> å®çš„å®šä¹‰ï¼Œä¸ä¸Šé¢ <code>LEAF</code> ä¸ <code>NESTED</code> ç±»ä¼¼ã€‚</p>
<p>ç¬¬äºŒè¡Œçš„ <code>.end</code> æ˜¯ä¸ºäº†ä¸å…ˆå‰ <code>LEAF</code> æˆ– <code>NESTED</code> å£°æ˜ä¸­çš„ <code>.ent</code> é…å¯¹ï¼Œæ ‡è®°äº† <code>symbol</code> å‡½æ•°çš„ç»“æŸã€‚</p>
<p>ç¬¬ä¸‰è¡Œçš„ <code>.size</code> æ˜¯æ ‡è®°äº† <code>function</code> ç¬¦å·å ç”¨çš„å­˜å‚¨ç©ºé—´å¤§å°ï¼Œå°† <code>function</code> ç¬¦å·å ç”¨çš„ç©ºé—´å¤§å°è®¾ç½®ä¸º <code>.-function</code>ï¼Œ<code>.</code> ä»£è¡¨äº†å½“å‰åœ°å€ï¼Œå½“å‰ä½ç½®çš„åœ°å€å‡å» <code>function</code> æ ‡ç­¾å¤„çš„åœ°å€å³å¯è®¡ç®—å‡ºç¬¦å·å ç”¨çš„ç©ºé—´å¤§å°ã€‚</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>ä½œè€…: </span><span class="post-copyright-info"><a href="https://wrongization.site">wrongization</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>é“¾æ¥: </span><span class="post-copyright-info"><a href="https://wrongization.site/2024/09/22/mipscommand.html">https://wrongization.site/2024/09/22/mipscommand.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>è½¬è½½æ³¨æ„: </span><span class="post-copyright-info">é™¤éå¦æœ‰è¯´æ˜ï¼Œå¦åˆ™æœ¬åšå®¢ä¸­çš„æ‰€æœ‰æ–‡ç« å‡é‡‡ç”¨<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/co/">co</a><a class="post-meta__tags" href="/tags/mips/">mips</a></div><div class="post_share"><div class="social-share" data-image="/img/cover/mips/mips.webp" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://lib.baomitu.com/social-share.js/1.0.16/css/share.min.css" media="print" onload="this.media='all'"><script src="https://lib.baomitu.com/social-share.js/1.0.16/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/10/23/p3cpu.html" title="BUAA-CO-P3-logisimå•å‘¨æœŸCPUï¼ˆç®€åŒ–æŒ‡ä»¤ï¼‰"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover/p3cpu/cpu.webp" onerror="onerror=null;src='/img/404.webp'" alt="cover of previous post"><div class="pagination-info"><div class="label">æ˜å¤œ</div><div class="prev_info">BUAA-CO-P3-logisimå•å‘¨æœŸCPUï¼ˆç®€åŒ–æŒ‡ä»¤ï¼‰</div></div></a></div><div class="next-post pull-right"><a href="/2024/08/25/vscode.html" title="vscodeé…ç½®"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover/vscode/vscode.webp" onerror="onerror=null;src='/img/404.webp'" alt="cover of next post"><div class="pagination-info"><div class="label">æ˜¨å¤œ</div><div class="next_info">vscodeé…ç½®</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>ç›¸å…³æ–‡ç« </span></div><div class="relatedPosts-list"><div><a href="/2024/11/02/coise.html" title="BUAA-CO-ISEå¤–éƒ¨è¿è¡Œé…ç½®"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover/coise/coise.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-11-02</div><div class="title">BUAA-CO-ISEå¤–éƒ¨è¿è¡Œé…ç½®</div></div></a></div><div><a href="/2024/11/05/p4cpu.html" title="BUAA-CO-P4-verilogå•å‘¨æœŸCPUï¼ˆç®€åŒ–æŒ‡ä»¤ï¼‰"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover/p4cpu/p4cpu.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-11-05</div><div class="title">BUAA-CO-P4-verilogå•å‘¨æœŸCPUï¼ˆç®€åŒ–æŒ‡ä»¤ï¼‰</div></div></a></div><div><a href="/2024/11/11/p5cpu.html" title="BUAA-CO-P5-verilogäº”å±‚æµæ°´çº¿CPUï¼ˆç®€åŒ–æŒ‡ä»¤ï¼‰"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover/p5cpu/p5cpu.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-11-11</div><div class="title">BUAA-CO-P5-verilogäº”å±‚æµæ°´çº¿CPUï¼ˆç®€åŒ–æŒ‡ä»¤ï¼‰</div></div></a></div><div><a href="/2024/12/02/p6cpu.html" title="BUAA-CO-P6-verilogäº”å±‚æµæ°´çº¿CPUï¼ˆå…¨æŒ‡ä»¤ï¼‰"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover/p6cpu/p6cpu.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-12-02</div><div class="title">BUAA-CO-P6-verilogäº”å±‚æµæ°´çº¿CPUï¼ˆå…¨æŒ‡ä»¤ï¼‰</div></div></a></div><div><a href="/2024/12/16/p7cpu.html" title="BUAA-CO-P7-verilogäº”å±‚æµæ°´çº¿CPUï¼ˆå…¨æŒ‡ä»¤ï¼‰"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover/p7cpu/p7cpu.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-12-16</div><div class="title">BUAA-CO-P7-verilogäº”å±‚æµæ°´çº¿CPUï¼ˆå…¨æŒ‡ä»¤ï¼‰</div></div></a></div><div><a href="/2024/10/23/p3cpu.html" title="BUAA-CO-P3-logisimå•å‘¨æœŸCPUï¼ˆç®€åŒ–æŒ‡ä»¤ï¼‰"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover/p3cpu/cpu.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-10-23</div><div class="title">BUAA-CO-P3-logisimå•å‘¨æœŸCPUï¼ˆç®€åŒ–æŒ‡ä»¤ï¼‰</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/logo.webp" onerror="this.onerror=null;this.src='/img/gif404.gif'" alt="avatar"/></div><div class="author-info__name">wrongization</div><div class="author-info__description">BUAAer</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">22</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">29</div></a><a href="/categories/"><div class="headline">ç±»åˆ«</div><div class="length-num">26</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/wrongization"><i class="fab fa-github"></i><span>My Github Page</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://space.bilibili.com/175003959" target="_blank" title="bilibili"><i class="fab fa-bilibili" style="color: #FF69B4;"></i></a><a class="social-icon" href="https://500px.com.cn/wrongization" target="_blank" title="500px"><i class="fab fa-500px" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:2560668452@qq.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #7D26CD;"></i></a><a class="social-icon" href="https://steamcommunity.com/id/wrongization" target="_blank" title="steam"><i class="fab fa-steam-square" style="color: #00008B;"></i></a><a class="social-icon" href="https://www.test-ipv6.com/index.html.zh_CN" target="_blank" title="ipv6æµ‹è¯•"><i class="fas fa-spinner fa-pulse" style="color: #00EE00;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>å…¬å‘Š</span></div><div class="announcement_content">Aboutç•Œé¢æ›´æ–°äº†ï¼Œè®°å¾—çœ‹çœ‹å‘¦ï¼</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">1.</span> <span class="toc-text">COåˆè¯†mipsçŸ¥è¯†ç‚¹</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AF%84%E5%AD%98%E5%99%A8%E5%9C%B0%E5%9D%80%EF%BC%9A"><span class="toc-number">1.1.</span> <span class="toc-text">å¯„å­˜å™¨åœ°å€ï¼š</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BC%AA%E6%8C%87%E4%BB%A4"><span class="toc-number">1.2.</span> <span class="toc-text">ä¼ªæŒ‡ä»¤</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#V0-%E7%9A%84%E4%B8%8D%E5%90%8C%E5%80%BC"><span class="toc-number">1.3.</span> <span class="toc-text">V0   çš„ä¸åŒå€¼</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">2.</span> <span class="toc-text">å¸¸ç”¨æŒ‡ä»¤</span></a></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">3.</span> <span class="toc-text">ä» CO åˆ° OSï¼šMIPS ç›¸å…³çŸ¥è¯†è¡¥å……</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9E%E9%A1%BE"><span class="toc-number">3.1.</span> <span class="toc-text">å›é¡¾</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%BF%E5%AD%98%E6%B5%81%E7%A8%8B"><span class="toc-number">3.2.</span> <span class="toc-text">è®¿å­˜æµç¨‹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CP0-%E5%8D%8F%E5%A4%84%E7%90%86%E5%99%A8%E7%9B%B8%E5%85%B3"><span class="toc-number">3.3.</span> <span class="toc-text">CP0 åå¤„ç†å™¨ç›¸å…³</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%AD%E6%96%AD%E5%BC%82%E5%B8%B8%E7%9B%B8%E5%85%B3"><span class="toc-number">3.3.1.</span> <span class="toc-text">ä¸­æ–­å¼‚å¸¸ç›¸å…³</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%89%B9%E6%9D%83%E7%AE%A1%E7%90%86%E7%9B%B8%E5%85%B3"><span class="toc-number">3.3.2.</span> <span class="toc-text">ç‰¹æƒç®¡ç†ç›¸å…³</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MIPS-Calling-Convention"><span class="toc-number">3.4.</span> <span class="toc-text">MIPS Calling Convention</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%9A%E7%94%A8%E5%AF%84%E5%AD%98%E5%99%A8"><span class="toc-number">3.4.1.</span> <span class="toc-text">é€šç”¨å¯„å­˜å™¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%88%E5%B8%A7"><span class="toc-number">3.4.2.</span> <span class="toc-text">æ ˆå¸§</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Leaf-Nonleaf-Subroutine"><span class="toc-number">3.4.3.</span> <span class="toc-text">Leaf &amp; Nonleaf Subroutine</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E5%8F%B6%E5%87%BD%E6%95%B0%EF%BC%88Simple-Leaf%EF%BC%89"><span class="toc-number">3.4.3.1.</span> <span class="toc-text">ç®€å•å¶å‡½æ•°ï¼ˆSimple Leafï¼‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E5%B1%80%E9%83%A8%E6%95%B0%E6%8D%AE%E7%9A%84%E5%8F%B6%E5%87%BD%E6%95%B0%EF%BC%88Leaf-with-Data%EF%BC%89"><span class="toc-number">3.4.3.2.</span> <span class="toc-text">æœ‰å±€éƒ¨æ•°æ®çš„å¶å‡½æ•°ï¼ˆLeaf with Dataï¼‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9D%9E%E5%8F%B6%E5%87%BD%E6%95%B0%EF%BC%88Nonleaf%EF%BC%89"><span class="toc-number">3.4.3.3.</span> <span class="toc-text">éå¶å‡½æ•°ï¼ˆNonleafï¼‰</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MIPS-Directives-Macro"><span class="toc-number">3.5.</span> <span class="toc-text">MIPS Directives &amp; Macro</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#byte%E3%80%81-half%E3%80%81-word%E3%80%81-ascii%E3%80%81-asciiz"><span class="toc-number">3.5.1.</span> <span class="toc-text">.byteã€.halfã€.wordã€.asciiã€.asciiz</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#align"><span class="toc-number">3.5.2.</span> <span class="toc-text">.align</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#globl%E3%80%81-extern"><span class="toc-number">3.5.3.</span> <span class="toc-text">.globlã€.extern</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#set"><span class="toc-number">3.5.4.</span> <span class="toc-text">.set</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#LEAF%E3%80%81NESTED%E3%80%81END-%E4%B8%89%E4%B8%AA%E5%AE%8F"><span class="toc-number">3.5.5.</span> <span class="toc-text">LEAFã€NESTEDã€END ä¸‰ä¸ªå®</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#LEAF"><span class="toc-number">3.5.5.1.</span> <span class="toc-text">LEAF</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#NESTED"><span class="toc-number">3.5.5.2.</span> <span class="toc-text">NESTED</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#END"><span class="toc-number">3.5.5.3.</span> <span class="toc-text">END</span></a></li></ol></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>æœ€è¿‘æŠ•ç¨¿</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/06/18/os-shell.html" title="BUAA-OS-shell"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover/osshell/osshell.webp" onerror="this.onerror=null;this.src='/img/404.webp'" alt="BUAA-OS-shell"/></a><div class="content"><a class="title" href="/2025/06/18/os-shell.html" title="BUAA-OS-shell">BUAA-OS-shell</a><time datetime="2025-06-17T16:28:25.000Z" title="åˆ›å»º 2025-06-18 00:28:25">2025-06-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/06/10/oo_unit4.html" title="BUAA-OO-unit4"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover/oo_unit4/oo_unit4.webp" onerror="this.onerror=null;this.src='/img/404.webp'" alt="BUAA-OO-unit4"/></a><div class="content"><a class="title" href="/2025/06/10/oo_unit4.html" title="BUAA-OO-unit4">BUAA-OO-unit4</a><time datetime="2025-06-10T15:20:28.000Z" title="åˆ›å»º 2025-06-10 23:20:28">2025-06-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/06/01/oslab6.html" title="BUAA-OS-LAB6"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover/oslab6/oslab6.webp" onerror="this.onerror=null;this.src='/img/404.webp'" alt="BUAA-OS-LAB6"/></a><div class="content"><a class="title" href="/2025/06/01/oslab6.html" title="BUAA-OS-LAB6">BUAA-OS-LAB6</a><time datetime="2025-06-01T03:45:14.000Z" title="åˆ›å»º 2025-06-01 11:45:14">2025-06-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/05/17/oslab5.html" title="BUAA-OS-LAB5"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover/oslab5/oslab5.webp" onerror="this.onerror=null;this.src='/img/404.webp'" alt="BUAA-OS-LAB5"/></a><div class="content"><a class="title" href="/2025/05/17/oslab5.html" title="BUAA-OS-LAB5">BUAA-OS-LAB5</a><time datetime="2025-05-17T11:55:44.000Z" title="åˆ›å»º 2025-05-17 19:55:44">2025-05-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/05/17/oo_unit3.html" title="BUAA-OO-unit3"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover/oo_unit3/oo_unit3.webp" onerror="this.onerror=null;this.src='/img/404.webp'" alt="BUAA-OO-unit3"/></a><div class="content"><a class="title" href="/2025/05/17/oo_unit3.html" title="BUAA-OO-unit3">BUAA-OO-unit3</a><time datetime="2025-05-17T11:37:18.000Z" title="åˆ›å»º 2025-05-17 19:37:18">2025-05-17</time></div></div></div></div></div></div></main><footer id="footer" style="background: linear-gradient( 0deg,#D15FEE,30%,#7D26CD 100%)"><div id="footer-wrap"><div class="copyright">&copy;2024 - 2025 By wrongization</div><div class="footer_custom_text"><a href="https://icp.gov.moe/?keyword=20250929" target="_blank">èŒICPå¤‡20250929å·</a> <span id="realtime_duration"></span> <p> <a style="margin-inline:5px"target="_blank" href="https://hexo.io/"> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Frame-Hexo-blue?style=flat&logo=hexo" title="åšå®¢æ¡†æ¶ä¸º Hexo" alt="HEXO"> </a> <a style="margin-inline:5px"target="_blank" href="https://butterfly.js.org/"> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&logo=bitdefender" title="ä¸»é¢˜é‡‡ç”¨ Butterfly" alt="Butterfly"> </a> <a style="margin-inline:5px"target="_blank" href="https://github.com/"> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Source-Github-d021d6?style=flat&logo=GitHub" title="æœ¬ç«™é¡¹ç›®ç”± GitHub æ‰˜ç®¡" alt="GitHub"> </a> <a style="margin-inline:5px"target="_blank"href="http://creativecommons.org/licenses/by-nc-sa/4.0/"> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-d42328?style=flat&logo=Claris" alt="img" title="æœ¬ç«™é‡‡ç”¨çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº«4.0å›½é™…è®¸å¯åè®®è¿›è¡Œè®¸å¯"> </a> <a style="margin-inline:5px"target="_blank" href="https://www.cloudflare-cn.com"> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/DNS-Cloudflare-f6821f?style=flat&logo=cloudflare" title="æœ¬ç«™é‡‡ç”¨Clouldflare DNS" alt="Clouldflare"> </a> <a style="margin-inline:5px"target="_blank" href="https://ipw.cn/ipv6webcheck/?site=wrongization.github.io"> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Internet-IPV6-07c160?style=flat&logo=data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNjI2NjE2MjI3NDgxIiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjI0NjkiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PGRlZnM+PHN0eWxlIHR5cGU9InRleHQvY3NzIj48L3N0eWxlPjwvZGVmcz48cGF0aCBkPSJNNTEyIDY0YTQ0OCA0NDggMCAxIDAgMCA4OTZBNDQ4IDQ0OCAwIDAgMCA1MTIgNjR6IG0wIDgyMC4wMzJBMzcyLjAzMiAzNzIuMDMyIDAgMCAxIDUxMiAxMzkuOTY4YTM3Mi4wMzIgMzcyLjAzMiAwIDAgMSAwIDc0NC4wNjR6IiBmaWxsPSIjMDdjMTYwIiBwLWlkPSIyNDcwIj48L3BhdGg+PHBhdGggZD0iTTM4Mi4yMDggNzMxLjI2NFYzMjBIMzIwdjQxMS4yNjRoNjIuMjA4eiBtMTQ0LjU3NiAwVjU3MS4xMzZoMTA2LjU2Yzk4LjQ5NiAwIDE0OC4wMzItNDIuMDQ4IDE0OC4wMzItMTI2LjE0NEM3ODEuMzc2IDM2MS40NzIgNzMyLjQxNiAzMjAgNjM0LjQ5NiAzMjBINDY0djQxMS4yNjRoNjIuNzg0eiBtMTAyLjUyOC0yMTMuNjk2SDUyNi43ODR2LTE0NGgxMDIuNTI4YzMwLjUyOCAwIDUyLjk5MiA1Ljc2IDY3LjM5MiAxNy4yOCAxNC40IDEwLjM2OCAyMS44ODggMjguOCAyMS44ODggNTQuMTQ0IDAgMjUuMzQ0LTcuNDg4IDQzLjc3Ni0yMS4zMTIgNTUuMjk2LTE0LjQgMTEuNTItMzYuODY0IDE3LjI4LTY3Ljk2OCAxNy4yOHoiIGZpbGw9IiMwN2MxNjAiIHAtaWQ9IjI0NzEiPjwvcGF0aD48L3N2Zz4=" title="æœ¬ç«™æ”¯æŒIPv6è®¿é—®" alt="ipv6"> </a> <a style="margin-inline:5px"target="_blank" href="https://v6.51.la/land/3L1PzYyEGNZiFQyL"> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Support-51.LA-1690ff?style=flat&logo=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwgAADsIBFShKgAAAAzNJREFUWEe9V0tPFEEQ5j+BC8h7kaiJB72oUS/Gg3pRSYw3PRkvHky8EpC3LNGoG4yKxIgxRPEgvjBBWUIEI+oShekZdmd2y/qGGXeYbmZndnUr+fbVPVVfV39V3VvVOig+x0fMNL9XFPGRbLptUMxX8ct6x22i9oRVUSBm25DQkIE0fuAvFUV7wiRe/GpZBFoZLYPqsWL4JwQQPD68SUQ1HoSyCdT1adQ5YdC16QzV9mrKOUEoiwBWHLuh0cSCST9EnnbdFNQUcSvKIrCzX9DBOzppWbLt4uQG1TAh1dztUBaBag7WNeNEZ3u5bFFDvxZJkCUTaBwQtGdE0NJazglPZPHHUw+NSFoomUBNj6DLzzec0AVLfjJpB2cmbEWURKCZU9zMGZhZsZywBVvL5G1dQB+qZ/0oiUCMU3z2sUF5J6jfumYyocUYmUALA3s8njKdcLJ9+Z2j3awP6ETlw4vIBOr7BB1N6qRvH9826AM6UfnwIjIBpHbgfaH0trPXrA/oBHpR+XERiUAjC2vfqKAVTd79rE+PmHFm3LD1ovLlIhIBNJ6rLzKbETw2tWTR8Ac5K4/mTVsvQSUZmgBSCUezPwuNxzW04P23dDJ8uoBOoJf6gJIMTQDN5cITufEsr+VtxSM7OJT81v8uG1iSoQig9Or52J1clBtP95vNANjrTkVv+MZ6gW6gH5XvUATqegUdH9Mloa1z1zvkdD23O779LpOEbpAhle+iBLDvSP/oR1lkY9z3cR9wRYa6vzIlbxN0w/6VJVmUQAOv7gALLK1vTa7FX0/7Tj50vr0JQcvrcpmeZ/1gIV7fQFEC1T0aXX8ll970V4v3VT77oYduzx3BtaeLpq0j6Mk7P5AAUtbB16yFX3LpXXqmvv1AD4fv4pbkyxi7OHHf4Dvk1vmBBGIsPgSC5dgfkGfMpXM2MdX9D3qI8UqTc6ZdEZgPwBKzWd4ynuN5LpBAE+/psXu6fetFWwXOcakd4d8w5p3rBcbQmFCWmI+jGz5OPjDs8dAE4gw4q+W0IXUuIEzvPD9Uz2HlqktKURH+b/wlwC/On1OzovD8OdVSnIFVsKkkmMRq25BI/QEyZCI2oNn1NQAAAABJRU5ErkJggg==" title="æœ¬ç«™é‡‡ç”¨51.LAç»Ÿè®¡" alt="51.LA"> </a> </p></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"></div><div id="rightside-config-show"><button id="darkmode" type="button" title="æ‰“å¼€/å…³é—­å¤œé—´æ¨¡å¼"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="éšè—/æ˜¾ç¤ºä¾§è¾¹æ "><i class="fas fa-arrows-alt-h"></i></button><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="go-up" type="button" title="è¿”å›é¡¶éƒ¨"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@17.8.8/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.js"></script><div class="js-pjax"></div><script charset="UTF-8" id="LA_COLLECT" src="//sdk.51.la/js-sdk-pro.min.js"></script><script>LA.init({id:"3L1PzYyEGNZiFQyL",ck:"3L1PzYyEGNZiFQyL"})</script><script src="https://sdk.51.la/perf/js-sdk-perf.min.js" crossorigin="anonymous"></script><script> new LingQue.Monitor().init({id:"3L1Q2CzO5ktWU3Sd"});</script><script src="https://cdn.jsdelivr.net/npm/dayjs@1.11.7/dayjs.min.js"></script><script src="https://cdn.jsdelivr.net/npm/dayjs@1.11.7/plugin/duration.min.js"></script><script src="/scripts/realtime.js"></script><linkrel="stylesheet"href="http://aciano.top/redirect/?target=https://cdn.jsdelivr.net/npm/aplayer@1.10/dist/APlayer.min.css"><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="120" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/canvas-nest.min.js"></script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/click-show-text.min.js" data-mobile="false" data-text="ZTMY" data-fontsize="15px" data-random="false" async="async"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">æœç´¢</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  æ•°æ®åº“åŠ è½½ä¸­</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« " type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=4.13.0"></script></div></div></body></html>